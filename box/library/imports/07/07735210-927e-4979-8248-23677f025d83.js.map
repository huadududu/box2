{"version":3,"sources":["../../../../../assets/src/utils/assets/src/utils/LocalStorage.js"],"names":["GameConfig","require","module","exports","LC","cc","Class","extends","Object","get","k","defaultv","callback","isFBInstantGame","FBInstant","player","getDataAsync","then","data","v","sys","localStorage","getItem","set","setDataAsync","setItem","delete","removeItem","instance"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,aAAaC,QAAQ,YAAR,CAAjB;;AAGAC,OAAOC,OAAP,GAAmB,YAAY;;AAE3B,QAAIC,KAAKC,GAAGC,KAAH,CAAS;AACdC,iBAAQF,GAAGG,MADG;;AAGdC,aAAK,aAAUC,CAAV,EAAqC;AAAA,gBAAxBC,QAAwB,uEAAb,EAAa;AAAA,gBAAVC,QAAU;;;AAEtC,gBAAGZ,WAAWa,eAAX,EAAH,EAAgC;AAC5BC,0BAAUC,MAAV,CAAiBC,YAAjB,CAA8B,CAACN,CAAD,CAA9B,EACKO,IADL,CACU,UAASC,IAAT,EAAc;AAChB,wBAAI,OAAOA,KAAKR,CAAL,CAAP,KAAmB,WAAvB,EAAoC;AAChCE,iCAASM,KAAKR,CAAL,CAAT;AACH;AACJ,iBALL;AAMH,aAPD,MAOK;;AAED,oBAAIS,IAAId,GAAGe,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4BZ,CAA5B,CAAR;AACA,oBAAG,CAACS,CAAJ,EAAM;AACFA,wBAAIR,QAAJ;AACH;AACD;AACAC,yBAASO,CAAT;AACH;AACJ,SArBa;;AAuBdI,aAAK,aAAUb,CAAV,EAAYS,CAAZ,EAAe;;AAEhB,gBAAGnB,WAAWa,eAAX,EAAH,EAAgC;AAC5BC,0BAAUC,MAAV,CAAiBS,YAAjB,CAA8B;AAC1Bd,uBAAES;AADwB,iBAA9B;AAGH,aAJD,MAIK;AACDd,mBAAGe,GAAH,CAAOC,YAAP,CAAoBI,OAApB,CAA4Bf,CAA5B,EAA8BS,CAA9B;AACH;AACJ,SAhCa;;AAkCdO,gBAAO,iBAAUhB,CAAV,EAAa;AACjBL,eAAGe,GAAH,CAAOC,YAAP,CAAoBM,UAApB,CAA+BjB,CAA/B;AACF;;AApCa,KAAT,CAAT;;AAyCA,QAAIkB,WAAW,IAAIxB,EAAJ,EAAf;AACA,WAAOwB,QAAP;AACH,CA7CkB,EAAnB","file":"LocalStorage.js","sourceRoot":"../../../../../assets/src/utils","sourcesContent":["/**\n * Created by bing on 02/05/2018.\n */\n\nlet GameConfig = require(\"GameConfig\");\n\n\nmodule.exports  =  function () {\n\n    let LC = cc.Class({\n        extends:cc.Object,\n\n        get: function (k, defaultv = '',callback) {\n\n            if(GameConfig.isFBInstantGame()){\n                FBInstant.player.getDataAsync([k])\n                    .then(function(data){\n                        if (typeof data[k] !== 'undefined') {\n                            callback(data[k]);\n                        }\n                    });\n            }else{\n\n                let v = cc.sys.localStorage.getItem(k);\n                if(!v){\n                    v = defaultv;\n                }\n                // return v;\n                callback(v);\n            }\n        },\n\n        set: function (k,v) {\n\n            if(GameConfig.isFBInstantGame()){\n                FBInstant.player.setDataAsync({\n                    k:v\n                });\n            }else{\n                cc.sys.localStorage.setItem(k,v);\n            }\n        },\n       \n        delete:function (k) {\n           cc.sys.localStorage.removeItem(k);\n        }\n        \n        \n    });\n\n    let instance = new LC();\n    return instance;\n}();\n\n\n\n"]}