{"version":3,"sources":["../../../../../assets/src/model/assets/src/model/Global.js"],"names":["cc","_RF","push","module","GameConfig","require","exports","lc","high","cls","Class","properties","hard","level","gold","gem","exp","openAdTimes","inviteFriends","hammer","default","efficiency","addgold","addgem","freindsInfo","bar1","bar2","typebtn","skipID","offlinetime","language","InviteCount","initInfo","get","v","parseInt","bind","JSON","parse","InviteClaim","getMore","syncPlayerInfo","saveLevel","h","set","saveHard","saveExp","saveHammer","stringify","saveGold","saveGem","saveOpenAdTimes","saveInviteFriends","saveEfficiency","updateInviteFriends","count","syncPlayerInfoToFB","LocalStorage","Coins","data","syncInviteFriends","now","Date","key","getUTCFullYear","toString","getUTCDate","getUTCDay","instance","pop"],"mappings":"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","file":"Global.js","sourceRoot":"../../../../../assets/src/model","sourcesContent":["\"use strict\";\ncc._RF.push(module, '4d84cHfepJMm5hdOQQhmuG8', 'Global');\n// src/model/Global.js\n\n\"use strict\";\n\n/*\n * Created by Ren on 2018/6/11.\n */\n\nvar GameConfig = require(\"GameConfig\");\nmodule.exports = function () {\n\n    var lc = require(\"LocalStorage\");\n    var high = 'high';\n\n    var cls = cc.Class({\n        properties: {\n            hard: 1,\n            level: 1,\n            gold: 0,\n            gem: 0,\n            exp: 0,\n            openAdTimes: 0,\n            inviteFriends: 0,\n            hammer: {\n                default: {}\n            },\n            efficiency: {\n                default: {}\n            },\n            addgold: 0,\n            addgem: 0,\n            freindsInfo: {\n                default: {}\n            },\n            bar1: 0,//加速1加速buff1\n            bar2: 0,//加速1加速buff2,\n            typebtn:null,\n            skipID:0,\n            offlinetime:0,\n            language:'English',\n            InviteCount:10,\n\n\n        },\n\n        initInfo: function initInfo() {\n            this.hard = 1;\n\n            lc.get('level', 1, function (v) {\n                if (typeof v == \"string\") {\n                    this.level = parseInt(v);\n                } else if (typeof v == \"number\") {\n                    this.level = v;\n                } else {\n                    this.level = 1;\n                }\n            }.bind(this));\n            lc.get('hard', 1, function (v) {\n                if (typeof v == \"string\") {\n                    this.hard = parseInt(v);\n                } else if (typeof v == \"number\") {\n                    this.hard = v;\n                } else {\n                    this.hard = 1;\n                }\n            }.bind(this));\n            lc.get('gold', 0, function (v) {\n                if (typeof v == \"string\") {\n                    this.gold = parseInt(v);\n                } else if (typeof v == \"number\") {\n                    this.gold = v;\n                } else {\n                    this.gold = 0;\n                }\n            }.bind(this));\n\n            lc.get('hammer', null, function (v) {\n                if (v != null) {\n                    this.hammer = JSON.parse(v);\n                } else {\n                    this.hammer = {};\n                }\n            }.bind(this));\n\n            lc.get('exp', 0, function (v) {\n                if (typeof v == \"string\") {\n                    this.exp = parseInt(v);\n                } else if (typeof v == \"number\") {\n                    this.exp = v;\n                } else {\n                    this.exp = 0;\n                }\n            }.bind(this));\n\n            lc.get('gem', 0, function (v) {\n                if (typeof v == \"string\") {\n                    this.gem = parseInt(v);\n                } else if (typeof v == \"number\") {\n                    this.gem = v;\n                } else {\n                    this.gem = 0;\n                }\n            }.bind(this));\n            lc.get('openAdTimes', 0, function (v) {\n                if (typeof v == \"string\") {\n                    this.openAdTimes = parseInt(v);\n                } else if (typeof v == \"number\") {\n                    this.openAdTimes = v;\n                } else {\n                    this.openAdTimes = 0;\n                }\n            }.bind(this));\n            lc.get('freindsInfo', {}, function (v) {\n                if (v != null) {\n                    this.freindsInfo = v;\n                } else {\n                    this.freindsInfo = {};\n                }\n            }.bind(this));\n            lc.get('efficiency', null, function (v) {\n                if (v != null) {\n                    this.efficiency = JSON.parse(v);\n                } else {\n                    this.efficiency = {};\n                }\n            }.bind(this));\n            this.InviteClaim  =[true,false,false,false];\n            lc.getMore(['Coins',\"invite_0\",\"invite_1\",\"invite_2\",\"invite_3\"],0,this.syncPlayerInfo.bind(this));\n\n        },\n\n        saveLevel: function saveLevel(h) {\n\n            lc.set('level', h);\n            this.level = h;\n        },\n\n         saveHard: function saveHard(h) {\n             lc.set('hard', h);\n             this.hard = h;\n         },\n\n        saveExp: function saveExp(h) {\n            lc.set('exp', h);\n            this.exp = h;\n        },\n\n        saveHammer: function saveHammer(hammer) {\n            lc.set('hammer', JSON.stringify(hammer));\n            this.hammer = hammer;\n        },\n\n        saveGold: function saveGold(gold) {\n            lc.set('gold', gold);\n            this.gold = gold;\n        },\n\n        saveGem: function saveGem(gem) {\n            lc.set('gem', gem);\n            this.gem = gem;\n        },\n        saveOpenAdTimes: function saveInviteFriends(openAdTimes) {\n            lc.set('openAdTimes', openAdTimes);\n            this.openAdTimes = openAdTimes;\n        },\n        saveInviteFriends: function saveInviteFriends(inviteFriends) {\n            lc.set('inviteFriends', inviteFriends);\n            this.inviteFriends = inviteFriends;\n        },\n        saveEfficiency: function saveEfficiency(efficiency) {\n            lc.set('efficiency', JSON.stringify(efficiency));\n            this.efficiency = efficiency;\n        },\n        updateInviteFriends:function (count) {\n            this.InviteCount = count;\n        },\n        syncPlayerInfoToFB:function () {\n            LocalStorage.set(['Coins',],this.Coins);\n        },\n\n        syncPlayerInfo:function (data) {\n            if (typeof data[\"Coins\"] != 'undefined') {\n                this.Coins = data[\"Coins\"];\n            }\n\n            this.InviteClaim  =[];\n            if (typeof data[\"invite_0\"] != 'undefined') {\n                this.InviteClaim.push(data[\"invite_0\"])\n            }else{\n                this.InviteClaim.push(false)\n            }\n\n            if (typeof data[\"invite_1\"] != 'undefined') {\n                this.InviteClaim.push(data[\"invite_1\"])\n            }else{\n                this.InviteClaim.push(false)\n            }\n\n            if (typeof data[\"invite_2\"] != 'undefined') {\n                this.InviteClaim.push(data[\"invite_2\"])\n            }else{\n                this.InviteClaim.push(false)\n            }\n\n            if (typeof data[\"invite_3\"] != 'undefined') {\n                this.InviteClaim.push(data[\"invite_3\"])\n            }else{\n                this.InviteClaim.push(false)\n            }\n        },\n\n        syncInviteFriends:function () {\n\n            // if(GameConfig.isFBInstantGame()){\n            let now = new Date();\n            let LocalStorage = require(\"LocalStorage\");\n            let key = \"invaite\" + now.getUTCFullYear().toString() + '-'+now.getUTCDate().toString() +\"-\"+now.getUTCDay();\n            LocalStorage.get(key,0,this.updateInviteFriends.bind(this));\n            // }\n        },\n\n\n    });\n    var instance = new cls();\n    return instance;\n}();\n\ncc._RF.pop();"]}