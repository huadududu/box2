{"version":3,"sources":["../../../../../assets/src/view/assets/src/view/UpgradView.js"],"names":["Global","require","StageConfig","BoxConfig","RewardConfig","GameUtils","LevelConfig","EfficiencyConfig","cc","Class","extends","Component","properties","RewardLable","Label","TitleLable","DescLable","BoxController","onLoad","type","uplevel","onEnable","typebtn","addlevel","skipReward","outlineReward","myinfo","level","needexp","exp","needgold","rewardcoin","addgold","saveLevel","saveExp","string","GameMenuController","updateDate","skipID","onVedioSureBtn","golds","gold","saveGold","node","active","onNextBtn"],"mappings":"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","file":"UpgradView.js","sourceRoot":"../../../../../assets/src/view","sourcesContent":["/*\n * Created by Ren on 2018/6/12.\n */\nlet Global = require('Global');\nlet StageConfig = require(\"StageConfig\");\nlet BoxConfig = require(\"BoxConfig\");\nlet RewardConfig = require(\"RewardConfig\");\nlet GameUtils = require(\"GameUtils\");\nlet LevelConfig =require(\"LevelConfig\");\nlet EfficiencyConfig =require(\"EfficiencyConfig\");\ncc.Class({\n\n    extends:cc.Component,\n    properties:{\n\n        RewardLable:cc.Label,\n        TitleLable:cc.Label,\n        DescLable:cc.Label,\n        BoxController:require('BoxController')\n    },\n\n    onLoad:function () {\n        this.type;\n        this.uplevel={'uplevel':3,'skip':2,'outline':2};\n    },\n    onEnable:function(){\n        this.type= this.uplevel[Global.typebtn];\n        if(Global.typebtn == 'uplevel')\n        {\n            this.addlevel();\n\n        }\n        else if(Global.typebtn == 'skip'){\n            this.skipReward();\n\n        }else{\n            this.outlineReward();\n        }\n\n\n    },\n    addlevel:function(){\n        let myinfo ={};\n        let level =Global.level;\n        let needexp = LevelConfig[ level].exp;\n        let needgold = LevelConfig[ level].rewardcoin;\n        Global.addgold = needgold;\n        myinfo.exp =Global.exp-needexp;\n        myinfo.level =Global.level+1;\n        Global.saveLevel( myinfo.level);\n        Global.saveExp( myinfo.exp);\n\n        this.RewardLable.string = \"x\"+needgold;\n        Global.addgold =needgold;\n        this.BoxController.GameMenuController.updateDate(myinfo);\n    },\n    skipReward:function(){\n        if(Global.skipID<=0)\n            return;\n        else{\n            let myinfo={};\n            // let conf = EfficiencyConfig[Global.skipID];\n            this.RewardLable.string = \"x\"+Global.addgold;\n\n        }\n\n    },\n    outlineReward:function(){\n\n    },\n    onVedioSureBtn:function(){\n        let golds = Global.gold+Global.addgold * 3;\n        if(Global.addgold>0 ){\n            this.BoxController.GameMenuController.updateDate({gold:golds});\n            Global.saveGold(golds);\n        }\n        Global.addgold =0;\n        this.node.active = false;\n\n    },\n    onNextBtn:function(){\n        let golds = Global.gold+Global.addgold;\n        this.BoxController.GameMenuController.updateDate({gold:golds});\n        Global.saveGold(golds);\n        if(Global.addgold>0 ){\n            this.node.active = false;\n            Global.saveGold(golds);\n        }\n        Global.addgold =0;\n        this.node.active = false;\n    }\n\n});"]}