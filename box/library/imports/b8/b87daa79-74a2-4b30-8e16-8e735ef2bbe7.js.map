{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\src\\controller/assets\\src\\controller\\InviteController.js"],"names":["RankItemFactory","require","GameConfig","Global","cc","Class","extends","Component","properties","TimeTipLb","Label","invitePrefab","Prefab","inviteContent","Node","onLoad","i","node","addItem","setPosition","addChild","updateTip","schedule","onDestroy","unschedule","now","Date","tommorow","UTC","getUTCFullYear","getUTCDate","getUTCDay","leftTime","getUTCHours","getUTCMinutes","getUTCSeconds","Hours","Math","floor","Mins","Seconds","string","toString","onClose","removeFromParent","index","instantiate","InviteItem","getComponent","updateItem","showTip","inviteCon","InviteConfig","num","rewardid","rewardCon","RewardConfig","coin","coinLabel","InviteCount"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,kBAAmBC,QAAQ,iBAAR,CAAvB;AACA,IAAIC,aAAaD,QAAQ,YAAR,CAAjB;AACA,IAAIE,SAASF,QAAQ,QAAR,CAAb;;AAEAG,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAUL,GAAGM,KADL;AAERC,sBAAaP,GAAGQ,MAFR;AAGRC,uBAAcT,GAAGU;AAHT,KAHP;;AASL;AACAC,YAAQ,kBAAY;;AAEhB,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAqB,EAAEA,CAAvB,EAAyB;AACrB,gBAAIC,OAAO,KAAKC,OAAL,CAAaF,CAAb,CAAX;AACAC,iBAAKE,WAAL,CAAiB,CAAjB,EAAmB,CAAnB;AACA,iBAAKN,aAAL,CAAmBO,QAAnB,CAA4BH,IAA5B;AACH;;AAED;;AAEA,aAAKI,SAAL;AACA,aAAKC,QAAL,CAAc,KAAKD,SAAnB,EAA6B,CAA7B;AACH,KAtBI;;AAwBLE,eAAU,qBAAY;;AAElB,aAAKC,UAAL,CAAgB,KAAKH,SAArB;AACH,KA3BI;;AA6BLA,eAAU,qBAAY;;AAElB,YAAII,MAAM,IAAIC,IAAJ,EAAV;AACA,YAAIC,WAAWD,KAAKE,GAAL,CAASH,IAAII,cAAJ,EAAT,EAA8BJ,IAAIK,UAAJ,EAA9B,EAA+CL,IAAIM,SAAJ,KAAgB,CAA/D,EAAiE,CAAjE,EAAmE,CAAnE,EAAqE,CAArE,CAAf;AACA,YAAIC,WAAWL,WAAWD,KAAKE,GAAL,CAASH,IAAII,cAAJ,EAAT,EAA8BJ,IAAIK,UAAJ,EAA9B,EAA+CL,IAAIM,SAAJ,EAA/C,EAA+DN,IAAIQ,WAAJ,EAA/D,EAAiFR,IAAIS,aAAJ,EAAjF,EAAqGT,IAAIU,aAAJ,EAArG,CAA1B;AACA,YAAIC,QAAQC,KAAKC,KAAL,CAAWN,WAAS,MAAT,GAAgB,IAA3B,CAAZ;AACA,YAAIO,OAAOF,KAAKC,KAAL,CAAW,CAACN,WAAS,MAAT,GAAiBI,QAAM,IAAxB,IAA8B,EAAzC,CAAX;AACA,YAAII,UAAUH,KAAKC,KAAL,CAAWN,WAAS,MAAT,GAAiBI,QAAM,IAAvB,GAA4B,KAAGG,IAA1C,CAAd;AACA,aAAK9B,SAAL,CAAegC,MAAf,GAAwBL,MAAMM,QAAN,KAAkB,GAAlB,GAAsBH,KAAKG,QAAL,EAAtB,GAAsC,GAAtC,GAA0CF,QAAQE,QAAR,EAAlE;AACH,KAtCI;;AAwCLC,aAAQ,mBAAY;AAChB,aAAK1B,IAAL,CAAU2B,gBAAV,CAA2B,IAA3B;AACH,KA1CI;;AA4CL1B,aAAS,iBAAS2B,KAAT,EAAgB;AACrB,YAAI5B,OAAMb,GAAG0C,WAAH,CAAe,KAAKnC,YAApB,CAAV;AACA,YAAIoC,aAAa9B,KAAK+B,YAAL,CAAkB,YAAlB,CAAjB;AACAD,mBAAWE,UAAX,CAAsBJ,KAAtB;AACA,eAAO5B,IAAP;AACH,KAjDI;;AAmDLiC,aAAQ,mBAAY;;AAEhB;AACA,YAAIC,YAAYC,aAAa,QAAb,EAAuB,CAAvB,CAAhB;AACA,YAAIC,MAAMF,UAAU,KAAV,CAAV;AACA,YAAIG,WAAWH,UAAU,UAAV,CAAf;AACA,YAAII,YAAYC,aAAaF,SAASZ,QAAT,EAAb,CAAhB;AACA,YAAIe,OAAOF,UAAU,MAAV,CAAX;AACA,aAAKG,SAAL,CAAejB,MAAf,GAAyB,MAAMgB,KAAKf,QAAL,EAA/B;AACA,YAAGvC,OAAOwD,WAAP,IAAsBN,GAAzB,EAA6B,CAE5B;AACJ;AA/DI,CAAT","file":"InviteController.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\src\\controller","sourcesContent":["/**\r\n * Created by bing on 31/05/2018.\r\n */\r\n\r\nlet RankItemFactory =  require(\"RankItemFactory\");\r\nlet GameConfig = require(\"GameConfig\");\r\nlet Global = require(\"Global\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        TimeTipLb:cc.Label,\r\n        invitePrefab:cc.Prefab,\r\n        inviteContent:cc.Node\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\r\n        for(let i = 0; i < 4;++i){\r\n            let node = this.addItem(i);\r\n            node.setPosition(0,0);\r\n            this.inviteContent.addChild(node);\r\n        }\r\n\r\n        //获取领取invite的几个条目。\r\n\r\n        this.updateTip();\r\n        this.schedule(this.updateTip,1);\r\n    },\r\n\r\n    onDestroy:function () {\r\n\r\n        this.unschedule(this.updateTip);\r\n    },\r\n\r\n    updateTip:function () {\r\n\r\n        let now = new Date();\r\n        let tommorow = Date.UTC(now.getUTCFullYear(),now.getUTCDate(),now.getUTCDay()+1,0,0,0);\r\n        let leftTime = tommorow-  Date.UTC(now.getUTCFullYear(),now.getUTCDate(),now.getUTCDay(),now.getUTCHours(),now.getUTCMinutes(),now.getUTCSeconds());\r\n        let Hours = Math.floor(leftTime/1000.0/3600);\r\n        let Mins = Math.floor((leftTime/1000.0- Hours*3600)/60);\r\n        let Seconds = Math.floor(leftTime/1000.0- Hours*3600-60*Mins);\r\n        this.TimeTipLb.string = Hours.toString() +\":\"+Mins.toString()+\":\"+Seconds.toString();\r\n    },\r\n\r\n    onClose:function () {\r\n        this.node.removeFromParent(true);\r\n    },\r\n\r\n    addItem: function(index) {\r\n        let node= cc.instantiate(this.invitePrefab);\r\n        let InviteItem = node.getComponent('InviteItem');\r\n        InviteItem.updateItem(index);\r\n        return node;\r\n    },\r\n\r\n    showTip:function () {\r\n\r\n        //获取最后一个\r\n        let inviteCon = InviteConfig[\"invite\"][3];\r\n        let num = inviteCon['num'];\r\n        let rewardid = inviteCon['rewardid'];\r\n        let rewardCon = RewardConfig[rewardid.toString()];\r\n        let coin = rewardCon['coin'];\r\n        this.coinLabel.string =  \"+\" + coin.toString();\r\n        if(Global.InviteCount >= num){\r\n\r\n        }\r\n    },\r\n});\r\n"]}