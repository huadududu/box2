{"version":3,"sources":["../../../../../assets/src/controller/assets/src/controller/InviteController.js"],"names":["RankItemFactory","require","GameConfig","Global","cc","Class","extends","Component","properties","TimeTipLb","Label","invitePrefab","Prefab","inviteContent","Node","onLoad","i","node","addItem","setPosition","addChild","updateTip","schedule","onDestroy","unschedule","now","Date","tommorow","UTC","getUTCFullYear","getUTCDate","getUTCDay","leftTime","getUTCHours","getUTCMinutes","getUTCSeconds","Hours","Math","floor","Mins","Seconds","string","toString","onClose","removeFromParent","index","instantiate","InviteItem","getComponent","updateItem","showTip","inviteCon","InviteConfig","num","rewardid","rewardCon","RewardConfig","coin","coinLabel","InviteCount"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,kBAAmBC,QAAQ,iBAAR,CAAvB;AACA,IAAIC,aAAaD,QAAQ,YAAR,CAAjB;AACA,IAAIE,SAASF,QAAQ,QAAR,CAAb;;AAEAG,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAUL,GAAGM,KADL;AAERC,sBAAaP,GAAGQ,MAFR;AAGRC,uBAAcT,GAAGU;AAHT,KAHP;;AASL;AACAC,YAAQ,kBAAY;;AAEhB,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAqB,EAAEA,CAAvB,EAAyB;AACrB,gBAAIC,OAAO,KAAKC,OAAL,CAAaF,CAAb,CAAX;AACAC,iBAAKE,WAAL,CAAiB,CAAjB,EAAmB,CAAnB;AACA,iBAAKN,aAAL,CAAmBO,QAAnB,CAA4BH,IAA5B;AACH;;AAED;;AAEA,aAAKI,SAAL;AACA,aAAKC,QAAL,CAAc,KAAKD,SAAnB,EAA6B,CAA7B;AACH,KAtBI;;AAwBLE,eAAU,qBAAY;;AAElB,aAAKC,UAAL,CAAgB,KAAKH,SAArB;AACH,KA3BI;;AA6BLA,eAAU,qBAAY;;AAElB,YAAII,MAAM,IAAIC,IAAJ,EAAV;AACA,YAAIC,WAAWD,KAAKE,GAAL,CAASH,IAAII,cAAJ,EAAT,EAA8BJ,IAAIK,UAAJ,EAA9B,EAA+CL,IAAIM,SAAJ,KAAgB,CAA/D,EAAiE,CAAjE,EAAmE,CAAnE,EAAqE,CAArE,CAAf;AACA,YAAIC,WAAWL,WAAWD,KAAKE,GAAL,CAASH,IAAII,cAAJ,EAAT,EAA8BJ,IAAIK,UAAJ,EAA9B,EAA+CL,IAAIM,SAAJ,EAA/C,EAA+DN,IAAIQ,WAAJ,EAA/D,EAAiFR,IAAIS,aAAJ,EAAjF,EAAqGT,IAAIU,aAAJ,EAArG,CAA1B;AACA,YAAIC,QAAQC,KAAKC,KAAL,CAAWN,WAAS,MAAT,GAAgB,IAA3B,CAAZ;AACA,YAAIO,OAAOF,KAAKC,KAAL,CAAW,CAACN,WAAS,MAAT,GAAiBI,QAAM,IAAxB,IAA8B,EAAzC,CAAX;AACA,YAAII,UAAUH,KAAKC,KAAL,CAAWN,WAAS,MAAT,GAAiBI,QAAM,IAAvB,GAA4B,KAAGG,IAA1C,CAAd;AACA,aAAK9B,SAAL,CAAegC,MAAf,GAAwBL,MAAMM,QAAN,KAAkB,GAAlB,GAAsBH,KAAKG,QAAL,EAAtB,GAAsC,GAAtC,GAA0CF,QAAQE,QAAR,EAAlE;AACH,KAtCI;;AAwCLC,aAAQ,mBAAY;AAChB,aAAK1B,IAAL,CAAU2B,gBAAV,CAA2B,IAA3B;AACH,KA1CI;;AA4CL1B,aAAS,iBAAS2B,KAAT,EAAgB;AACrB,YAAI5B,OAAMb,GAAG0C,WAAH,CAAe,KAAKnC,YAApB,CAAV;AACA,YAAIoC,aAAa9B,KAAK+B,YAAL,CAAkB,YAAlB,CAAjB;AACAD,mBAAWE,UAAX,CAAsBJ,KAAtB;AACA,eAAO5B,IAAP;AACH,KAjDI;;AAmDLiC,aAAQ,mBAAY;;AAEhB;AACA,YAAIC,YAAYC,aAAa,QAAb,EAAuB,CAAvB,CAAhB;AACA,YAAIC,MAAMF,UAAU,KAAV,CAAV;AACA,YAAIG,WAAWH,UAAU,UAAV,CAAf;AACA,YAAII,YAAYC,aAAaF,SAASZ,QAAT,EAAb,CAAhB;AACA,YAAIe,OAAOF,UAAU,MAAV,CAAX;AACA,aAAKG,SAAL,CAAejB,MAAf,GAAyB,MAAMgB,KAAKf,QAAL,EAA/B;AACA,YAAGvC,OAAOwD,WAAP,IAAsBN,GAAzB,EAA6B,CAE5B;AACJ;AA/DI,CAAT","file":"InviteController.js","sourceRoot":"../../../../../assets/src/controller","sourcesContent":["/**\n * Created by bing on 31/05/2018.\n */\n\nlet RankItemFactory =  require(\"RankItemFactory\");\nlet GameConfig = require(\"GameConfig\");\nlet Global = require(\"Global\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        TimeTipLb:cc.Label,\n        invitePrefab:cc.Prefab,\n        inviteContent:cc.Node\n    },\n\n    // use this for initialization\n    onLoad: function () {\n\n        for(let i = 0; i < 4;++i){\n            let node = this.addItem(i);\n            node.setPosition(0,0);\n            this.inviteContent.addChild(node);\n        }\n\n        //获取领取invite的几个条目。\n\n        this.updateTip();\n        this.schedule(this.updateTip,1);\n    },\n\n    onDestroy:function () {\n\n        this.unschedule(this.updateTip);\n    },\n\n    updateTip:function () {\n\n        let now = new Date();\n        let tommorow = Date.UTC(now.getUTCFullYear(),now.getUTCDate(),now.getUTCDay()+1,0,0,0);\n        let leftTime = tommorow-  Date.UTC(now.getUTCFullYear(),now.getUTCDate(),now.getUTCDay(),now.getUTCHours(),now.getUTCMinutes(),now.getUTCSeconds());\n        let Hours = Math.floor(leftTime/1000.0/3600);\n        let Mins = Math.floor((leftTime/1000.0- Hours*3600)/60);\n        let Seconds = Math.floor(leftTime/1000.0- Hours*3600-60*Mins);\n        this.TimeTipLb.string = Hours.toString() +\":\"+Mins.toString()+\":\"+Seconds.toString();\n    },\n\n    onClose:function () {\n        this.node.removeFromParent(true);\n    },\n\n    addItem: function(index) {\n        let node= cc.instantiate(this.invitePrefab);\n        let InviteItem = node.getComponent('InviteItem');\n        InviteItem.updateItem(index);\n        return node;\n    },\n\n    showTip:function () {\n\n        //获取最后一个\n        let inviteCon = InviteConfig[\"invite\"][3];\n        let num = inviteCon['num'];\n        let rewardid = inviteCon['rewardid'];\n        let rewardCon = RewardConfig[rewardid.toString()];\n        let coin = rewardCon['coin'];\n        this.coinLabel.string =  \"+\" + coin.toString();\n        if(Global.InviteCount >= num){\n\n        }\n    },\n});\n"]}