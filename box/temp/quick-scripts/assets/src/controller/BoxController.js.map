{"version":3,"sources":["BoxController.js"],"names":["StageConfig","require","BlockConfig","CycleConfig","ToolConfig","AttributeConfig","AcceleratorConfig","EfficiencyConfig","BoxConfig","RewardConfig","LanguageConfig","GameType","GameUtils","GameState","BlockBigFactory","BlockSmallFactory","RewardItemFactory","UILeadFactory","SpriteFrameCenter","ParticleSystemCenter","SkeletonDataCenter","GameConfig","Global","cc","Class","extends","Component","properties","gameNode","Node","camera","Camera","BlockBig","Prefab","BlockSmall","MarginsBig","MarginsSmall","RewardItem","UIBottom","uilead","inviteUI","inviteItem","Sky","Bgbz","Underground","motionStreak","MotionStreak","boxSpine","sp","Skeleton","GameMenu","treasure","Button","upgradView","loadingView","hammerNode","blockNodes","onLoadPage","openbox","type","visible","default","blockWidth","blockBlank","moveNum","margins","curMaxLine","canTouch","previousPt","Hatting","HattingPos","accelerHammer","accelerGold","efficeGold","startClock","gameState","init","loadstate","onLoad","preLoadAtlas","onloadState","bind","winsize","winSize","BaseHeight","height","BaseWidth","width","GameHeight","hammerStart","hammerEnd","boxLeadNode","rowNum","startCameraY","blockLeadNode","blockPosNode","GameMenuController","find","getComponent","blocks","marginlist","hammers","rewardItem","startPos","setCompleteListener","animationName1","trackEntry","animation","name","log","trackIndex","addItems","firstOpen","startSC","initdata","start","active","initInfo","timescale","hammer","initEfficienyInfo","i","undefined","node","nodehammer","addComponent","info","addSkeletonData","addChild","id","j","animationName","checkCanHammer","smCallback","attribute","conf1","timeScale","att","parseFloat","time","update","restart","hard","saveHard","deleteBoxLead","destroy","hatting","floorNum","layer","length","blockwidth","size","count","blank","addBlocks","cameraStartPosY","changeBlockLead","playHammers","initTreasure","addUIBottom","playHammerSpine","hammerpos","setAnimation","setSmPosition","startAddHammer","stopHammerSpine","addHammer","conf","changeHammerSpine","data","skeletonData","startLine","x","startRow","y","position","console","realwidth","maxline","maxrow","totoalRowNum","range","geScreenRange","line","canclick","curline","checkCanDestroy","push","num","randomInt","row","location","getEffByBlock","getPngId","max","cameraPosY","getPositionY","min","maxPosY","canshowy","Math","floor","hamX","hamY","p","isValid","destroyBlock","resetMarginList","resetBlockList","lineinfo","addLines","getPngName","cycleID","topline","top","pngname","thisNum","factory","curX","curY","lineArray","left","createMargins","right","endpos","create","thisID","indexOf","cycleArry","split","getnum","parseInt","neednumber","texiao","addParticleForNode","practice","removeFromParent","destroyUpdate","cameraCentPosY","firstblock","bool","myinfo","addexp","addgold","exp","gold","updateDate","broadcastShows","coin","saveExp","saveGold","maxLineNum","move","oldY","newY","moveY","action1","moveTo","runAction","ralmovelength","posbottom","totoal","skyposy","bzYbottom","other","movePos","setPositionY","playBoxSpine","stopBoxSpine","BoxID","box","BoxConf","normalSprite","getFrameFromAtlas","icon","pressedSprite","hoverSprite","disabledSprite","addSkeletonDataWait","boxID","rewardID","reward","itemdata","random","z","gem","str","rewardarry","createRewardItem","golds","gems","saveGem","locationX","locationY","action","action2","callFunc","setFinish","sequence","onClickTreasure","event","maxlinenum","touchEndPoint","getLocation","updateTouch","end","addBoxLead","ratation","point","cameraY","gameY","touchStartCallBack","location1","touchState","convertToNodeSpace","setPositionX","reset","touchCancelCallBack","isTouching","touchEndCallBack","touchMoveCallBack","multMoveCallBack","location01","location02","distance","pSub","origin","eventcallback","string","isFBInstantGame","self","FBP","RewardedVideoAsync","accleleratorChange","accleleratorrRecover","toolChange","efficiencyAdd","changeHammerSpeed","updateButtom","speedHammer","speedGold","speed","changeGoldSpeed","checkCanAdd","saveHammer","addAdTime","mess","costtype","cost","next","confArry","unlock","openAdTimes","needlvl","level","inviteFriends","freindsInfo","addFriendCallBack","friendId","adGame","FBP1","chooseAsync","friendID","oldFriend","PopMsgController","showMsg","language","savefreindsInfo","efficiencyChange","timestamp","Date","parse","efficiency","jumptime","attr","btnType","skipID","saveEfficiency","nowtime","paseTime","timestart","useTime","timeleft","outlineTime","offlinetime","addeff","onClickBtnaddGem","onClickBtnsubGem","onClickBtnaddGold","onClickBtnsubGold","onClickBtnaddExp","onClickUnlockAll"],"mappings":"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","file":"BoxController.js","sourceRoot":"../../../../../assets/src/controller","sourcesContent":["/**\n * Created by bing on 20/04/2018.\n */\n\n//负责head展现和变换。\nlet StageConfig = require(\"StageConfig\");\nlet BlockConfig = require(\"BoxConfig1\");\nlet CycleConfig = require(\"CycleConfig\");\nlet ToolConfig = require(\"ToolConfig\");\nlet AttributeConfig = require(\"AttributeConfig\");\nlet AcceleratorConfig = require(\"AcceleratorConfig\");\nlet EfficiencyConfig = require(\"EfficiencyConfig\");\nlet BoxConfig = require(\"BoxConfig\");\nlet RewardConfig = require(\"RewardConfig\");\nlet LanguageConfig = require(\"LanguageConfig\");\n\n\n\nlet GameType = require(\"GameType\");\nlet GameUtils = require(\"GameUtils\");\nlet GameState = require(\"GameState\");\nlet BlockBigFactory = require(\"BlockBigFactory\");\nlet BlockSmallFactory = require(\"BlockSmallFactory\");\nlet RewardItemFactory = require(\"RewardItemFactory\");\nlet UILeadFactory = require(\"UILeadFactory\");\n\nlet SpriteFrameCenter = require(\"SpriteFrameCenter\");\nlet ParticleSystemCenter = require(\"ParticleSystemCenter\");\nlet SkeletonDataCenter = require(\"SkeletonDataCenter\");\nlet GameConfig = require(\"GameConfig\");\n// let GameMenuController = require('GameMenuController');\n\nlet Global = require('Global');\n\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        gameNode: cc.Node,\n        camera: cc.Camera,\n        BlockBig: cc.Prefab,\n        BlockSmall: cc.Prefab,\n        MarginsBig: cc.Prefab,\n        MarginsSmall: cc.Prefab,\n        RewardItem: cc.Prefab,\n        UIBottom: cc.Prefab,\n        uilead: cc.Prefab,\n        inviteUI:cc.Prefab,\n        inviteItem:cc.Prefab,\n        Sky: cc.Node,\n        Bgbz: cc.Node,\n        Underground: cc.Node,\n        motionStreak: cc.MotionStreak,\n        // hammer: sp.Skeleton,\n        boxSpine: sp.Skeleton,\n        GameMenu:cc.Node,\n        treasure: cc.Button,\n        upgradView: cc.Node,\n        loadingView:cc.Node,\n        hammerNode:cc.Node,\n        blockNodes:cc.Node,\n        onLoadPage:cc.Node,\n        openbox: cc.Node,\n\n        type: {\n            visible: false,\n            default: 0\n        },\n        blockWidth: 100,\n        blockBlank: {\n            visible: false,\n            default: 0\n        },\n        moveNum: {\n            visible: false,\n            default: 0\n        },\n        margins: {\n            visible: false,\n            default: 0\n        },\n        curMaxLine: {\n            visible: false,\n            default: 0\n        },\n        canTouch: {\n            visible: false,\n            default: true\n        },\n        previousPt: {\n            visible: false,\n            default: null\n        },\n        Hatting: {\n            visible: false,\n            default: false\n        },\n        HattingPos: {\n            visible: false,\n            default: null\n        },\n        accelerHammer: {\n            visible: false,\n            default: 1\n        },\n        accelerGold: {\n            visible: false,\n            default: 1\n        },\n        efficeGold: 0,\n        startClock:3,\n        gameState: GameState.init,//0 init 1 playing 2 rolling 3 end,\n        loadstate:2,\n    },\n\n\n    onLoad: function () {\n        SpriteFrameCenter.preLoadAtlas(\"png/box\",this.onloadState.bind(this));\n        this.winsize = cc.winSize;\n        this.BaseHeight = this.winsize.height / 2;\n        this.BaseWidth = this.winsize.width / 2;\n        this.GameHeight = this.winsize.height - 206;\n        this.hammerStart = 1;//表示锤子的起始id\n        this.hammerEnd = 10;//表示锤子的最后一个id\n        this.boxLeadNode = null;//box的引导节点\n        this.rowNum = 0;\n        this.startCameraY=0;\n        this.blockLeadNode = null;\n        this.blockPosNode = null;\n\n\n        this.GameMenuController = cc.find(\"Canvas/GameMenu\").getComponent(\"GameMenuController\");\n        // this.  loadingView = cc.find(\"Canvas/loading\").getComponent(\"loadingView\");\n        // Global.initInfo();\n        this.blocks = [];\n        this.marginlist = [];\n        this.hammers = {};\n        this.rewardItem = [];\n        this.accelerHammer = 1;\n        this.accelerGold = 1;\n        this.startPos = -this.GameHeight / 2;\n        this.boxSpine.setCompleteListener(trackEntry => {\n            var animationName1 = trackEntry.animation ? trackEntry.animation.name : \"\";\n            cc.log(\"recordSpine [track %s][animation %s] end.\", trackEntry.trackIndex, animationName1);\n            // this.restart();\n            this.addItems();\n\n        });\n\n        this.firstOpen = true;\n\n    },\n    onloadState:function(){\n        // this.loadstate--;\n        // if(this.loadstate<=0){\n            this.startSC();\n            this.initdata();\n        // }\n    },\n    start: function () {\n        this.onloadState();\n        this.onLoadPage.active = false;\n    },\n    startSC: function () {\n        this.GameMenuController.initInfo();\n        this.hammers = {};\n        let timescale = 1;\n        let hammer = Global.hammer;\n        this.initEfficienyInfo();//[改 延迟执行]\n        // SpriteFrameCenter.preLoadAtlas(\"png/box\", this.initdata.bind(this));\n        for (var i = this.hammerStart; i <= this.hammerEnd; i++) {\n            if (hammer[i] == undefined)\n                continue;\n            let node = new cc.Node();\n            let nodehammer = node.addComponent(sp.Skeleton);\n            let info = ToolConfig[i];\n            let animation = info.animation;\n            SkeletonDataCenter.addSkeletonData(animation, nodehammer);\n            this.hammerNode.addChild(node);\n            this.hammers[hammer[i].id] = nodehammer;\n            nodehammer.node.active = false;\n            let j=i;\n            nodehammer.setCompleteListener(trackEntry => {\n                var animationName = trackEntry.animation ? trackEntry.animation.name : \"\";\n                cc.log(\"HammerSpine [track %s][animation %s] end.\", trackEntry.trackIndex, animationName);\n                nodehammer.node.active = false;\n                if (this.checkCanHammer(j)) {\n                    this.smCallback(j);\n                }\n            });\n            let attribute = Global.hammer[i].attribute;\n            let conf1 = AttributeConfig[attribute];\n            nodehammer.timeScale = 0.17 * conf1.att / parseFloat(conf1.time) * this.accelerHammer;\n            // nodehammer.timeScale =  conf1.att / parseFloat(conf1.time) * this.accelerHammer;\n        }\n\n    },\n    update: function () {\n        // this.cameraCentPosY();\n    },\n    restart: function () {\n\n        if (StageConfig[Global.hard+1] != null && StageConfig[Global.hard+1] != undefined) {\n            Global.hard++;\n            Global.saveHard(Global.hard);\n        }\n        this.deleteBoxLead();\n        this.boxSpine.node.active = false;\n        for (let i = 1; i < 4; i++) {\n            // let node = this.rewardItem[i];\n            this.rewardItem[i].destroy();\n            // if(cc.isValid( node)){\n            //     node.destroy();\n            // }\n        }\n        this.rewardItem = [];\n        // this.addItems();\n        this.initdata();\n        this.gameState = GameState.hatting;\n    },\n    initdata: function () {\n        let floorNum = StageConfig[Global.hard].layer;\n        for (var i = 0; i < BlockConfig.length; i++) {\n            if (BlockConfig[i].blockwidth == StageConfig[Global.hard].size) {\n                this.type = BlockConfig[i].type;\n                break;\n            }\n        }\n\n        this.rowNum = BlockConfig[this.type].count;\n        this.blockWidth = BlockConfig[this.type].blockwidth;\n        this.blockBlank = BlockConfig[this.type].blank;\n        this.margins = BlockConfig[this.type].margins;\n\n        this.addBlocks();\n        this.cameraStartPosY();\n        this.changeBlockLead();\n        this.treasure.node.active = true;\n        this.playHammers();\n        this.initTreasure();\n        if(this.firstOpen) {\n            this.GameMenuController.addUIBottom();\n            this.firstOpen = false;\n        }\n\n\n    },\n    //-----------------------------锤子部分 start-------------------------\n    playHammerSpine: function (hammerpos) {\n\n        this.hammers[hammerpos].node.active = true;\n        this.hammers[hammerpos].setAnimation(0, \"newAnimation\", true);\n    },\n    playHammers: function () {\n        for (var i = this.hammerStart; i <= this.hammerEnd; i++) {\n            if (this.hammers[i] != undefined) {\n                this.setSmPosition(i);\n            }\n        }\n    },\n    startAddHammer:function(){\n\n    },\n    stopHammerSpine: function (hammerpos) {\n        this.hammers[hammerpos].node.active = false;\n    },\n    addHammer: function (id) {\n        let node = new cc.Node();\n        let hammer = node.addComponent(sp.Skeleton);\n        let info = ToolConfig[id];\n        let animation = info.animation;\n        let conf = AttributeConfig[info.attribute];\n\n        SkeletonDataCenter.addSkeletonData(animation, hammer);\n        this.hammerNode.addChild(node);\n        this.hammers[id] = hammer;\n        hammer.node.active = false;\n        hammer.setCompleteListener(trackEntry => {\n            var animationName = trackEntry.animation ? trackEntry.animation.name : \"\";\n            cc.log(\"HammerSpine [track %s][animation %s] end.\", trackEntry.trackIndex, animationName);\n            hammer.node.active = false;\n            if (this.checkCanHammer(id)) {\n                    this.smCallback(id);\n            }\n        });\n        let timescale = 0.17 * conf.att / parseFloat(conf.time) * this.accelerHammer;\n        // let timescale =  conf.att / parseFloat(conf.time) * this.accelerHammer;\n        hammer.timeScale = timescale;\n    },\n    changeHammerSpine: function (data) {\n        this.hammer.skeletonData = data;\n    },\n\n\n    checkCanHammer: function (id) {\n        var hammer = Global.hammer;\n        if (hammer[id] != undefined && hammer[id].attribute != -1)\n            return true;\n        return false;\n    },\n    setSmPosition: function (hammerpos) {\n        if(this.blockPosNode !=null){\n            if (this.HattingPos == null) {\n                this.HattingPos = {};\n            }\n            let startLine = this.blockPosNode.x;\n            let startRow = this.blockPosNode.y;\n            this.HattingPos[hammerpos] = this.blockPosNode;\n            let position = this.hammerpos(startLine,startRow);\n            console.log(\"choose:\",this.HattingPos[hammerpos]);\n            this.hammers[hammerpos].node.position = position;\n            this.hammers[hammerpos].node.active = true;\n            this.playHammerSpine(hammerpos);\n            this.blockPosNode = null;\n            return;\n        }\n        let realwidth = this.blockWidth + this.blockBlank;\n        let maxline = this.curMaxLine;\n        let maxrow = this.totoalRowNum(0);\n        if (maxline == 0 && maxrow == 0) {\n            this.HattingPos = null;\n            // this.sm.node.visible = false;\n            this.hammers[hammerpos].node.active = false;\n            return;\n        }\n\n        let range = this.geScreenRange();\n        let line = this.curMaxLine;\n        let find = false;\n        let canclick = [];\n        let curline = line;\n        for (; curline >= 0; curline--) {\n            for (var i = 0; i < this.rowNum; i++) {//当前行可以删除的\n                if (this.blocks[curline] && this.checkCanDestroy(curline, i)) {\n                    let find = false;\n                    for (var j = this.hammerStart; j <= this.hammerEnd; j++) {\n                        if (this.HattingPos && this.HattingPos[j]) {\n                            if (this.HattingPos[j].x == curline && i == this.HattingPos[j].y) {\n                                find = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (!find) {\n                        canclick.push(i);\n                    }\n                }\n            }\n            if (canclick.length > 0)\n                break;\n        }\n        if (canclick.length == 0) {\n            this.HattingPos[hammerpos] = null;\n            return;\n        }\n        let num = GameUtils.randomInt(0, canclick.length - 1);\n        let row = canclick[num];\n        let location = this.hammerpos(curline, row);\n        if (this.HattingPos == null) {\n            this.HattingPos = {};\n        }\n        this.HattingPos[hammerpos] = {x: curline, y: row};\n        console.log(\"choose:\",this.HattingPos[hammerpos]);\n        this.hammers[hammerpos].node.position = location;\n        this.hammers[hammerpos].node.active = true;\n        this.playHammerSpine(hammerpos);\n    },\n    //根据小块的位置 过的特效文件\n    getEffByBlock(line, row) {\n\n        let type = this.type == 0 ? \"BlockBig\" : \"BlockSmall\";\n        let node = this.blocks[line][row].getComponent(type);\n        return node.getPngId();\n    },\n    geScreenRange: function () {\n        let max = this.curMaxLine;\n        let cameraPosY = this.camera.node.getPositionY();\n        let min = 0;\n        let realwidth = this.blockWidth + this.blockBlank;\n        if (cameraPosY <= this.BaseHeight) {\n            min = 0;\n        } else {\n            let maxPosY = max * realwidth;\n            let canshowy = (maxPosY - cameraPosY + this.BaseHeight) / realwidth;\n            min = Math.floor(max - canshowy);\n        }\n        return {max: max, min: min};\n    },\n    //根据块的位置计算锤子的位置\n    hammerpos: function (line, row) {\n        // let cameraY = this.camera.node.getPositionY();\n        // let gameY = this.gameNode.y;\n        let realwidth = this.blockWidth + this.blockBlank;\n        // let realx = row * realwidth + this.margins + this.blockBlank;\n        // let realy = line * realwidth - cameraY ;\n        // let hamX = realx - this.BaseWidth  + this.blockWidth - 50;\n        // let hamY = realy + this.blockWidth -140;\n        // return cc.p(hamX, hamY);\n        let hamX = row * realwidth + this.margins + this.blockBlank -  this.BaseWidth + 50;\n        let hamY = line * realwidth - this.GameHeight/2+this.blockWidth;\n        return cc.p(hamX, hamY)\n\n\n    },\n    smCallback: function (hammerpos) {\n        if (this.HattingPos != null && this.HattingPos[hammerpos] != null) {\n\n            let y = this.HattingPos[hammerpos].y;\n            let x = this.HattingPos[hammerpos].x;\n            console.log(\"hammer:\",x,y);\n            if (cc.isValid(this.blocks[x][y])) {\n                this.destroyBlock(x, y);\n            }\n            // this.changeBlockLead(true);\n            this.setSmPosition(hammerpos);\n\n\n        }\n    },\n    //-----------------------------锤子部分 end-------------------------\n    //-----------------------------block start-------------------------\n\n    resetMarginList: function () {\n        if (this.marginlist && this.marginlist.length > 0) {\n            for (let i = 0; i < this.marginlist.length; i++) {\n                let node = this.marginlist[i];\n                if (cc.isValid(node)) {\n                    node.destroy();\n                }\n            }\n        }\n        this.marginlist = [];\n    },\n    resetBlockList: function () {\n        if (this.blocks && this.blocks.length > 0) {\n            for (let i = 0; i < this.blocks.length; i++) {\n                for (let j = 0; j < this.blocks[i].length; j++) {\n                    let node = this.blocks[i][j];\n                    if (cc.isValid(node)) {\n                        node.destroy();\n                    }\n                }\n            }\n        }\n        this.blocks = [];\n    },\n    addBlocks: function () {\n\n        this.resetBlockList();\n        this.resetMarginList();\n        let floorNum = StageConfig[Global.hard].layer;\n        for (var i = 0; i < floorNum - 1; i++) {\n\n            var lineinfo = this.addLines(this.getPngName(StageConfig[Global.hard].cycleID, i), i);\n\n            this.blocks.push(lineinfo);\n            lineinfo = [];\n        }\n        let topline = this.addLines(StageConfig[Global.hard].top, i);\n        this.blocks.push(topline);\n    },\n    addLines: function (pngname, thisNum) {\n\n        let conf = BlockConfig[this.type];\n        let count = conf.count;\n        let factory = this.type == 0 ? BlockBigFactory : BlockSmallFactory;\n        let curX = conf.margins + conf.blank - this.BaseWidth;\n        let curY = thisNum * (this.blockWidth + conf.blank) + this.startPos;\n        let lineArray = [];\n        let left = factory.createMargins(pngname);\n\n        left.position = cc.p(conf.margins / 2 - this.BaseWidth, curY + this.blockWidth / 2);\n        this.blockNodes.addChild(left);\n        this.marginlist.push(left);\n        let right = factory.createMargins(pngname);\n        let endpos = this.BaseWidth - conf.margins / 2;\n        right.position = cc.p(endpos, curY + this.blockWidth / 2);\n        this.blockNodes.addChild(right);\n        this.marginlist.push(right);\n\n        for (var i = 0; i < count; i++) {\n            let node = factory.create(pngname);\n            node.position = cc.p(curX + this.blockWidth / 2, curY + this.blockWidth / 2);\n            curX += this.blockWidth + conf.blank;\n            this.blockNodes.addChild(node);\n            lineArray.push(node);\n        }\n\n        return lineArray;\n    },\n\n    //根据 获得 图片的名字\n    getPngName(cycleID, thisNum) {\n        let thisID;\n        if (cycleID.indexOf(\";\") != -1) {\n            let cycleArry = cycleID.split(\";\");\n            let getnum = GameUtils.randomInt(0, cycleArry.length - 1);\n            thisID = cycleArry[getnum];\n        } else {\n            thisID = parseInt(cycleID);\n        }\n        let neednumber = 0;\n        for (var i = 1; i <= 10; i++) {\n            if (CycleConfig[thisID][\"num\" + i] == 0) {\n                i = 0;\n                continue;\n            }\n            neednumber += CycleConfig[thisID][\"num\" + i];\n            if (neednumber >= thisNum) {\n                return CycleConfig[thisID][\"block\" + i]\n            }\n            if (i == 10) {\n                i = 0;\n            }\n        }\n    },\n    //销毁砖块\n    destroyBlock: function (line, row) {\n\n        if (!this.blocks[line])\n            return;\n        let node = this.blocks[line][row];\n\n        if (node != null) {\n            let location = this.hammerpos(line, row);\n            let texiao = this.getEffByBlock(line, row);\n             console.log(\"destroylog:\", line, \":\", row, location);\n            ParticleSystemCenter.addParticleForNode(texiao + \".plist\", this.GameMenuController.practice, location);\n            node.removeFromParent(true);\n            this.blocks[line][row] = null;\n            this.destroyUpdate();\n            this.cameraCentPosY();\n        }\n        this.firstblock = false;\n        this.startClock--;\n        this.changeBlockLead();\n    },\n    changeBlockLead:function(){\n        let bool = this.startClock>0;\n        if(Global.hard == 1 && bool){\n            if(!this.blockLeadNode){\n                var node = UILeadFactory.create();\n                this.blockLeadNode= node;\n                this.hammerNode.addChild(node);\n            }\n            let row =3+this.startClock;\n            let line = 2;\n\n            let position = this.hammerpos(line,row);\n            position.y = position.y - 50;\n            position.x = position.x;\n            this.blockLeadNode.position = position;\n            this.blockPosNode = {x: line,y:row};\n        }else {\n            if (this.blockLeadNode) {\n                this.blockLeadNode.removeFromParent(true);\n                this.blockLeadNode = null;\n                this.blockPosNode = null;\n            }\n\n        }\n\n    },\n    checkCanDestroy: function (line, row) {\n        if (!this.blocks[line] || !this.blocks[line][row])\n            return false;\n        let floorNum = StageConfig[Global.hard].layer;\n        if (line >= floorNum - 1)\n            return true;\n        let node;\n        node = this.blocks[line + 1][row];\n        if (!cc.isValid(node)) {\n            return true;\n        }\n        if (line > 0) {\n            node = this.blocks[line - 1][row];\n            if (!cc.isValid(node)) {\n                return true;\n            }\n        }\n        if (row > 0 && row < this.rowNum - 1) {\n            node = this.blocks[line][row - 1];\n            if (!cc.isValid(node)) {\n                return true;\n            }\n            node = this.blocks[line][row + 1];\n            if (!cc.isValid(node)) {\n                return true;\n            }\n        } else if (row == 0) {\n            node = this.blocks[line][row + 1];\n            if (!cc.isValid(node)) {\n                return true;\n            }\n        } else if (row == this.rowNum - 1) {\n            node = this.blocks[line][row - 1];\n            if (!cc.isValid(node)) {\n                return true;\n            }\n        }\n        return false;\n    },\n    destroyUpdate: function () {\n\n        let myinfo = {};\n        let addexp =1;\n        let addgold = 1 * (this.accelerGold) + this.efficeGold;\n        myinfo.exp = Global.exp + addexp;\n        myinfo.gold = Global.gold + addgold;\n        this.GameMenuController.updateDate(myinfo);\n        this.GameMenuController.broadcastShows({exp:addexp,coin:addgold});\n        Global.saveExp(myinfo.exp);\n        Global.saveGold(myinfo.gold);\n\n\n    },\n    maxLineNum: function () {\n        var max = 0;\n        let floorNum = StageConfig[Global.hard].layer;\n        for (var i = 0; i < floorNum; i++) {\n            for (var j = 0; j < this.rowNum; j++) {\n                if (this.blocks && this.blocks[i] && this.blocks[i][j]) {\n                    var node = this.blocks[i][j];\n                    if (!cc.isValid(node))\n                        continue;\n                    if (i > max) {\n                        max = i;\n                    }\n                    break;\n                }\n            }\n        }\n        return max;\n    },\n\n    totoalRowNum: function (line) {//line 行拥有点的数量\n        var max = 0;\n        for (var j = 0; j < this.rowNum; j++) {\n            var node = this.blocks[line][j];\n            if (!cc.isValid(node))\n                continue;\n            max++;\n        }\n        return max;\n    },\n    //-----------------------------block   end-------------------------\n    //-----------------------------camera   start-------------------------\n\n    cameraCentPosY: function () {\n\n        let maxline = this.maxLineNum();\n        if (this.curMaxLine <= maxline) {\n            return;\n        }\n        let move = this.curMaxLine - maxline;\n        this.curMaxLine = maxline;\n        let oldY = this.camera.node.getPositionY();\n        if (oldY <= 0) {\n            return;\n        }\n        let newY = oldY - this.blockWidth * move;\n        let moveY = 0;\n        if (newY >= 0) {\n            moveY = newY;\n        } else {\n            moveY = 0;\n        }\n        let location = cc.p(0, moveY);\n        let action1 = cc.moveTo(0.1, location);\n        this.camera.node.runAction(action1);\n        let ralmovelength = oldY - newY;\n        // for (var i = this.hammerStart; i < this.hammerEnd; i++) {\n        //     if(this.hammers[i] != undefined){\n        //         let location=this.hammers[i].node.position;\n        //         let action2 = cc.moveTo(0.1,{x:location.x,y:location.y+ralmovelength})\n        //         this.hammers[i].node.runAction(action2);\n        //     }\n        // }\n    },\n\n    cameraStartPosY: function () {\n        let floorNum = StageConfig[Global.hard].layer;\n        let height = floorNum * (this.blockWidth + this.blockBlank);\n        //地下\n        this.Underground.height = height;\n        let posbottom = (height - this.GameHeight) / 2;\n        this.Underground.y = posbottom;\n        //地面\n        let totoal = this.Bgbz.height + height - 50;\n        let skyposy;\n        let bzYbottom;\n        let other = this.GameHeight - totoal;\n        bzYbottom = (totoal + height - this.GameHeight) / 2 - 25;\n        this.Bgbz.y = bzYbottom;\n        let movePos = 0;\n        if (other > 0) {\n            this.Sky.active = true;\n            this.Sky.height = other + 10;\n            skyposy = (this.GameHeight - other) / 2;\n            this.Sky.y = skyposy;\n            // this.camera.node.setPositionY(0);\n            movePos = 0;\n        } else {\n            this.Sky.active = false;\n            // this.camera.node.setPositionY(-other);\n            movePos = -other;\n        }\n        this.camera.node.setPositionY(movePos);\n        this.startCameraY = movePos;\n        this.curMaxLine = floorNum - 1;\n    },\n    //-----------------------------camera   end-------------------------\n    //----------------------------- treasure start----------------------\n    playBoxSpine: function () {\n        this.boxSpine.node.active = true;\n        this.boxSpine.setAnimation(0, \"newAnimation\", false);\n    },\n    stopBoxSpine: function () {\n        this.boxSpine.node.active = false;\n    },\n    initTreasure: function () {\n        let BoxID = StageConfig[Global.hard].box;\n        let BoxConf = BoxConfig[BoxID];\n        this.treasure.normalSprite = SpriteFrameCenter.getFrameFromAtlas(\"png/box\", BoxConf.icon + \".png\");\n        this.treasure.pressedSprite = SpriteFrameCenter.getFrameFromAtlas(\"png/box\", BoxConf.icon + \".png\");\n        this.treasure.hoverSprite = SpriteFrameCenter.getFrameFromAtlas(\"png/box\", BoxConf.icon + \".png\");\n        this.treasure.disabledSprite = SpriteFrameCenter.getFrameFromAtlas(\"png/box\", BoxConf.icon + \".png\");\n        let animation = BoxConf.animation;\n        SkeletonDataCenter.addSkeletonDataWait(animation, this.boxSpine);\n        this.treasure.node.y = -this.GameHeight / 2 + this.blockWidth + 35 - 20;\n        this.boxSpine.node.y = -this.GameHeight / 2 + this.blockWidth + 35 - 20+103;\n        // let loction  = this.gameNode.convertToWorldSpace(this.treasure.node.position);\n        // let loction1 = this.openbox.convertToNodeSpace(loction);\n        // this.boxSpine.node = loction1;\n\n    },\n    addItems: function () {\n\n        let hard = Global.hard;\n        let boxID = StageConfig[hard].box;\n        let rewardID = BoxConfig[boxID].reward;\n        let conf = RewardConfig[rewardID];\n        let num = conf.num;\n        let itemdata = {};\n        let totoal = 0;\n        let reward = {};\n        let max = 0;\n        for (let i = 1; i < 7; i++) {\n            if (conf['rate' + i] != 0) {\n                totoal = conf['rate' + i];\n                if (i == 1) {\n                    itemdata[i] = totoal;\n                    max = itemdata[i];\n                } else {\n                    itemdata[i] = itemdata[i - 1] + totoal;\n                    max = itemdata[i];\n                }\n            }\n        }\n        for (let j = 1; j <= num; j++) {\n            let random = GameUtils.random(max);\n            for (let z = 1; itemdata[z] != undefined; z++) {\n                if (itemdata[z] < random) {\n                    continue;\n                }\n                reward[j] = conf['item' + z];\n                break;\n            }\n        }\n        let gold = 0;\n        let gem = 0;\n        let str = \"\";\n        for (let i = 1; i <= num; i++) {\n            if (reward[i] != undefined) {\n                str += reward[i] + \"--\";\n                if (reward[i].indexOf(\";\") != -1) {\n                    let rewardarry = reward[i].split(\";\");\n                    if (rewardarry[0] == 1001) {\n                        gold += parseInt(rewardarry[1]);\n                    } else if (rewardarry[0] == 1002) {\n                        gem += parseInt(rewardarry[1]);\n                    }\n                }\n            }\n            this.createRewardItem(reward[i], i);\n            this.openbox.active = true;\n        }\n        if (gold > 0 || gem > 0) {\n            let golds = Global.gold + gold;\n            let gems = Global.gem + gem;\n            this.GameMenuController.updateDate({gold: golds, gem: gems});\n            Global.saveGold(golds);\n            Global.saveGem(gems);\n        }\n\n    },\n    createRewardItem: function (reward, i) {\n        if (this.rewardItem[i]) {\n            this.rewardItem[i].destroy();\n            this.rewardItem[i] = null;\n        }\n        let start = -400 + i * 200;\n\n        let node = RewardItemFactory.create(reward);\n        let locationX = this.treasure.node.position.x;\n        let locationY = this.treasure.node.position.y+103;\n\n        this.rewardItem[i] = (node);\n        node.position = cc.p(locationX,locationY);\n        let action = cc.moveTo(0.5, cc.p(start, 100));\n        let action2 = cc.callFunc(() => {\n            node.getComponent(\"RewardItem\").setFinish();\n            this.canTouch = true;\n        }, this);\n        // node.runAction(cc. moveTo(0.5,cc.p(start,-20)));\n        this.openbox.addChild(node);\n        node.runAction(cc.sequence(action, action2));\n    },\n    onClickTreasure: function (event) {\n        var maxlinenum = this.maxLineNum();\n        var totoalRowNum = this.totoalRowNum(0);\n        if (maxlinenum != 0 || totoalRowNum != 0) {\n            this.touchEndPoint = event.getLocation();\n\n            this.updateTouch(this.touchEndPoint);\n            return;\n        }\n        this.treasure.node.active = false;\n        this.gameState = GameState.end;\n        this.canTouch = false;\n        this.openbox.active= true;\n        this.playBoxSpine();\n    },\n    addBoxLead:function(){\n        if(Global.hard > 1)\n            return;\n        var maxlinenum = this.maxLineNum();\n        var totoalRowNum = this.totoalRowNum(0);\n        if (maxlinenum == 0 && totoalRowNum == 0) {\n            let node = UILeadFactory.create();\n            node.position= this.treasure.node.position;\n            node.ratation = 180;\n            this.boxLeadNode = node;\n            this.gameNode.addChild(node);\n        }\n    },\n    deleteBoxLead:function(){\n        if(this.boxLeadNode){\n            this.boxLeadNode.removeFromParent(true);\n            this.boxLeadNode= null;\n        }\n    },\n    //-----------------------------treasure end--------------------------\n    //-----------------------------touch   start-------------------------\n    updateTouch: function (point) {\n        let cameraY = this.camera.node.getPositionY();\n        let gameY = this.gameNode.y;\n        let realwidth = this.blockWidth + this.blockBlank;\n        var line = Math.floor((point.y + cameraY) / realwidth);\n        var row = Math.floor((point.x - this.margins - this.blockBlank) / realwidth);\n        let find = false;\n        if (this.checkCanDestroy(line, row)) {\n            for (var i = this.hammerStart; i <= this.hammerEnd; i++) {\n                if (this.HattingPos != null && this.HattingPos[i] != null && this.HattingPos[i] != undefined) {\n                    if (this.HattingPos[i].x == line && this.HattingPos[i].y == row) {\n                        this.hammers[i].node.active = false;\n                        // this.smCallback(i);\n\n                        this.destroyBlock(line, row);\n                        this.setSmPosition(i);\n                        find = true;\n                        break;\n                    }\n                }\n            }\n            if (!find) {\n                this.destroyBlock(line, row);\n            }\n        }\n        // this.changeBlockLead(true);\n    },\n    touchStartCallBack: function (location1) {\n\n        if (!this.canTouch) {\n            return;\n        }\n\n        console.log(\"touchStartCallBack\");\n\n        if (this.gameState == GameState.end) {\n            this.openbox.active = false;\n            this.restart();\n        }\n\n        if(this.touchState == undefined ||( this.touchState != 'start'  && this.touchState != 'move')){\n            this.touchState = 'start';\n        }else{\n            this.touchState = 'mult';\n        }\n        if(this.touchState == 'mult'){\n            console.log(\"藏起来\");\n            this.motionStreak.node.active = false;\n        }\n        let location= this.gameNode.convertToNodeSpace(location1);\n        this.motionStreak.node.setPositionX(location1.x - this.BaseWidth);\n        this.motionStreak.node.setPositionY(location1.y - this.BaseHeight);\n        this.motionStreak.reset();\n\n    },\n\n    touchCancelCallBack: function (location1) {\n        this.touchState = 'cancle';\n        let location= this.gameNode.convertToNodeSpace(location1);\n        this.updateTouch(location);\n        this.isTouching = false;\n        this.motionStreak.reset();\n        this.motionStreak.node.active = true;\n\n    },\n\n    touchEndCallBack: function (location1) {\n        this.touchState = 'end';\n        let location= this.gameNode.convertToNodeSpace(location1);\n        this.updateTouch(location);\n        this.isTouching = false;\n        console.log(\"touchEndCallBack\");\n        this.motionStreak.reset();\n        this.previousPt=null;\n        this.motionStreak.node.active = true;\n\n    },\n    touchMoveCallBack: function (location1) {\n        let location= this.gameNode.convertToNodeSpace(location1);\n        if (!this.canTouch) {\n            return;\n        }\n        this.touchState =\"move\";\n        console.log(\"touchMoveCallBack\");\n        this.motionStreak.node.setPositionX(location1.x - this.BaseWidth);\n        this.motionStreak.node.setPositionY(location1.y - this.BaseHeight);\n        if (location.x < this.margins || location.x > (2 * this.BaseWidth - this.margins\n            || location.y < 216)) {\n            this.motionStreak.reset();\n            return;\n        }\n        this.updateTouch(location);\n        // this.previousPt = location;\n        // let motionpos = this.node.convertToNodeSpace(location1);\n        // this.motionStreak.node.position=motionpos;\n    },\n    //多点触控\n    multMoveCallBack:function(location01,location02 = null){\n        this.touchState =\"mult\";\n        this.motionStreak.reset();\n        let location1 = this.gameNode.convertToNodeSpace(location01);\n        // let location2 = this.gameNode.convertToNodeSpace(location02);\n        // console.log(\"1\",location1);\n        // console.log(\"2\",location2);\n        if(this.previousPt == null){\n            this.previousPt={};\n            this.previousPt[0]= location1;\n            // this.previousPt[1]= location2;\n            return;\n        }\n        var distance = cc.pSub( this.previousPt[0],location1);\n        if(distance.y != 0){\n            let origin = this.camera.node.getPositionY();\n            let endpos =( origin+distance.y)*0.5;\n            if(endpos <0 ){\n                endpos =0;\n            }\n            if(endpos >this.startCameraY){\n                endpos = this.startCameraY;\n            }\n            if(endpos== 0)\n                return;\n            let move = origin - endpos;\n            this.camera.node.setPositionY(endpos);\n        }\n    },\n    //-----------------------------touch   end-------------------------\n    //-----------------------------bottom   start-------------------------\n\n\n\n    eventcallback: function (type, id, string = null) {\n        // let node= this.itemList.indexOf(sender);\n        switch (type) {\n            case 0:\n                if (string == null){\n                    //视频激励\n                    if(GameConfig.isFBInstantGame()){\n\n                        this.loadingView.active  = true;\n                        let self = this;\n                        let FBP = require(\"FBPlugin\");\n                        FBP.RewardedVideoAsync(function(){\n                                // let FBP = require(\"FBPlugin\");\n                                // self.adGame();\n                            self.loadingView.active  = false;\n                            self.accleleratorChange(id);\n                            }\n                        );\n                    }else{\n                        this.loadingView.active  = true;//[change]\n                        this.accleleratorChange(id);\n                    }\n\n                }\n                else {\n                    if (string == 'finish') {\n                        this.accleleratorrRecover(id);\n                    }\n                }\n                break;\n            case 1:\n                this.toolChange(id);\n                break;\n            case 2:\n                this.efficiencyAdd(id,string);\n                break;\n        }\n    },\n    //广告加速开始\n    accleleratorChange: function (id) {\n        let conf = AcceleratorConfig[id];\n        Global['bar' + id] = conf.time;\n        this.changeHammerSpeed();\n        this.GameMenuController.updateButtom();\n\n    },\n    //广告加速结束\n    accleleratorrRecover: function (id) {\n        this.changeHammerSpeed();\n        this.GameMenuController.updateButtom();\n    },\n\n    changeHammerSpeed: function () {\n        let speedHammer = 0;\n        let speedGold = 0;\n        for (let i = 1; i <= 2; i++) {\n            if (Global['bar' + i] > 0) {\n                speedHammer += AcceleratorConfig[i].speed;\n                speedGold += AcceleratorConfig[i].coin;\n            }\n        }\n        if (speedHammer == 0) {\n            speedHammer = 1;\n        }\n        if (speedGold == 0) {\n            speedGold = 1;\n        }\n        this.accelerHammer = speedHammer;\n        this.accelerGold = speedGold;\n        for (var i = this.hammerStart; i <= this.hammerEnd; i++) {\n            if (this.hammers[i] != undefined) {\n                let conf1 = AttributeConfig[Global.hammer[i].attribute];\n                this.hammers[i].timeScale = 0.17 * (conf1.att / parseFloat(conf1.time)) * this.accelerHammer;\n                // this.hammers[i].timeScale =  (conf1.att / parseFloat(conf1.time)) * this.accelerHammer;\n            }\n        }\n    },\n    changeGoldSpeed: function () {\n\n    },\n    toolChange: function (id) {\n        let info = ToolConfig[id];\n\n        if (Global.hammer[id] == undefined) {//激活\n            let bool = this.checkCanAdd(id);\n            if (bool) {\n                Global.hammer[id] = {id: id, attribute: info.attribute};\n                Global.saveHammer(Global.hammer);\n                this.addHammer(id);\n                this.setSmPosition(id);\n            } else {\n                this.addAdTime(id);\n            }\n            this.GameMenuController.updateButtom();\n\n        } else {//升级\n            let conf = AttributeConfig[Global.hammer[id].attribute];\n            let mess = {};\n\n            if (conf.costtype = 1001) {\n                Global.gold -= conf.cost;\n                mess['gold'] = Global.gold;\n            } else if (conf.costtype = 1002) {\n                Global.gem -= conf.cost;\n                mess['gem'] = Global.gem;\n            }\n            if (conf.next != -1) {\n                Global.hammer[id].attribute = conf.next;\n                let conf1 = AttributeConfig[conf.next];\n                Global.saveHammer(Global.hammer);\n                this.hammers[id].timeScale = 0.17 * (conf1.att / parseFloat(conf1.time)) * this.accelerHammer;\n                // this.hammers[id].timeScale = (conf1.att / parseFloat(conf1.time)) * this.accelerHammer;\n            }\n            this.GameMenuController.updateDate(mess);\n        }\n    },\n    checkCanAdd: function (id) {\n        let conf = ToolConfig[id];\n        let thisID;\n        let confArry;\n        if (\"unlock\" in conf) {\n            if (conf.unlock.indexOf(\";\") != -1) {\n                confArry = conf.unlock.split(\";\");\n                thisID = confArry[0];\n            } else {\n                thisID = parseInt(conf.unlock);\n            }\n            if (thisID == -1) {\n                return true;\n            }\n            if (thisID == 0) {//点击激活\n                return true;\n            } else if (thisID == 1) {//视频激励\n                return Global.openAdTimes > 0;\n            } else if (thisID == 2) {//等级激活\n                let needlvl = confArry[1];\n                if (Global.level < needlvl) {\n                    return false;\n                } else {\n                    return true;\n                }\n            } else if (thisID == 3) {//邀请好友\n                let inviteFriends;\n                if(GameConfig.isFBInstantGame()){\n                    if(Global.freindsInfo == null || Global.freindsInfo[id] == null){\n                        inviteFriends = 0\n                    }\n                    else{\n                        inviteFriends = Global.freindsInfo[id].length;\n                    }\n                }else{\n                    if(Global.freindsInfo == null || Global.freindsInfo[id] == null){\n                        inviteFriends = 0\n                    }\n                    else{\n                        inviteFriends = Global.freindsInfo[id].length;\n                    }\n                    // inviteFriends = Global.inviteFriends;\n                }\n                if(inviteFriends<confArry[1]){\n                    return false;\n                }else{\n                    return true;\n                }\n\n            }\n        }\n        return false;\n    },\n    addFriendCallBack:function(friendId){\n        if(Global.freindsInfo== null){\n            Global.freindsInfo = {};\n        }\n\n    },\n    addAdTime: function (id) {\n        let conf = ToolConfig[id];\n        let thisID;\n        let confArry;\n        let self = this;\n        if (\"unlock\" in conf) {\n            if (conf.unlock.indexOf(\";\") != -1) {\n                confArry = conf.unlock.split(\";\");\n                thisID = confArry[0];\n            } else {\n                thisID = parseInt(conf.unlock);\n            }\n            if (thisID == 1) {//视频激励\n\n                if(GameConfig.isFBInstantGame()){\n                    this.loadingView.active  = true;\n                    let FBP = require(\"FBPlugin\");\n                    FBP.RewardedVideoAsync(function(){\n                        let FBP = require(\"FBPlugin\");\n                            Global.openAdTimes++;\n                            self.adGame();\n                            self.GameMenuController.updateButtom();\n                        }\n                    );\n                }else{\n                    Global.openAdTimes++;\n                    this.loadingView.active  = true;//[change]\n                }\n            } else if (thisID == 3) {//邀请好友\n                let FBP1 = require(\"FBPlugin\");\n                let self = this;\n                if(GameConfig.isFBInstantGame()){\n                    FBP1.chooseAsync(function(friendID){\n                        if(Global.freindsInfo== null){\n                            Global.freindsInfo = {};\n                        }\n                        if( Global.freindsInfo[id] == null){\n                            Global.freindsInfo[id] =[];\n                        }\n                        var find = false;\n                        for(var i = 0;i<Global.freindsInfo[id].length;i++){\n                            let oldFriend = Global.freindsInfo[id];\n                            if(oldFriend ==friendID ){\n                                find= true;\n                                let PopMsgController = require(\"PopMsgController\");\n                                PopMsgController.showMsg(LanguageConfig['10039'][Global.language]);\n                                break;\n                            }\n                        }\n                        if(!find){\n                            Global.freindsInfo[id].push(friendID);\n                            Global.savefreindsInfo(Global.freindsInfo);\n                            // Global.inviteFriends = Global.freindsInfo[id].length;\n                        }\n                        self.GameMenuController.updateButtom();\n                    });\n                }else{\n                    // Global.inviteFriends++;\n                    if(Global.freindsInfo== null){\n                        Global.freindsInfo = {};\n                    }\n                    if( Global.freindsInfo[id] == null){\n                        Global.freindsInfo[id] =[];\n                    }\n                    let friendID = Global.freindsInfo[id].length+1;\n\n                    Global.freindsInfo[id].push(friendID);\n                    Global.savefreindsInfo(Global.freindsInfo);\n                    self.GameMenuController.updateButtom();\n                }\n            }\n        }\n    },\n\n    efficiencyAdd: function (id,str = null) {\n        if(str != null){\n            this.efficiencyChange();\n            return;\n        }\n        let conf = EfficiencyConfig[id];\n        let gem = 0;\n        let addgold=0;\n        if (conf.costtype == 1002 && Global.gem >= conf.cost) {//enough gem\n            gem = Global.gem - conf.cost;\n            if (conf.coin > 0) {\n                // this.efficeGold += conf.coin - 1;\n                let timestamp = Date.parse( new Date())/1000;// 以秒为单位\n                Global.efficiency[id] = {'id':id,'timeleft':conf.time,'timestart':timestamp};\n                this.efficiencyChange();\n            }\n            let myinfo = {};\n            if (conf.jumptime > 0) {//jump time\n\n                for(let i=this.hammerStart;i<=this.hammerEnd; i++){\n                    if(Global.hammer[i] != undefined){\n                        let attr = AttributeConfig[Global.hammer[i].attribute];\n                        addgold+=conf.jumptime*60*60/attr.time* attr.att;\n                    }\n                }\n                Global.addgold = addgold;\n                Global.btnType = 'skip';\n                Global.skipID = id;\n                this.upgradView.active= true;\n            }\n        }\n        this.GameMenuController.updateDate({'gem': gem});\n        Global.saveGem(gem);\n        Global.saveEfficiency(Global.efficiency);\n        this.GameMenuController.updateButtom();\n    },\n    //进入游戏计算离线时间 并计算收益\n    initEfficienyInfo:function(){\n        let nowtime= Date.parse( new Date())/1000;// 以秒为单位;\n        let addgold = 0;\n        for (let id in Global.efficiency) {\n            if ( Global.efficiency[id] == null){\n                continue;\n            }\n            let paseTime = (nowtime - Global.efficiency[id].timestart)/60;//以min\n            let conf = EfficiencyConfig[id];\n            let useTime = conf.time - Global.efficiency[id].timeleft;\n            if(paseTime > conf.time) {\n                paseTime = conf.time;\n            }\n            let outlineTime= paseTime - useTime;\n            let timeleft = conf.time - outlineTime - useTime;\n            if(timeleft <=0){\n                Global.efficiency[id] = null;\n            }else{\n                Global.efficiency[id].timeleft = parseInt(timeleft);\n                this.efficeGold += conf.coin - 1;\n            }\n            for(let i=this.hammerStart;i<=this.hammerEnd; i++){\n                if(Global.hammer[i] != undefined){\n                    let attr = AttributeConfig[Global.hammer[i].attribute];\n                    addgold+=conf.coin*outlineTime*60* attr.att/attr.time;\n                }\n            }\n            if(Global.offlinetime<outlineTime){\n                Global.offlinetime = outlineTime;\n            }\n        }\n        Global.saveEfficiency(Global.efficiency);\n        addgold  = parseInt(addgold);\n        if(addgold >0) {\n            Global.addgold = parseInt(addgold);\n            Global.btnType = 'outline';\n            this.upgradView.active = true;\n        }\n    },\n    //收益加速开始/结束\n    efficiencyChange: function () {\n        let addeff=0;\n\n        for( let id in Global.efficiency){\n            if(Global.efficiency[id] == null)\n                continue;\n            let conf = EfficiencyConfig[id];\n            addeff+=conf.coin - 1;\n        }\n        this.efficeGold = addeff;\n        this.GameMenuController.updateButtom();\n    },\n    //-----------------------------bottom   end----------------------------\n    //-----------------------------loading   start----------------------------\n\n    adGame:function () {\n        this.loadingView.active  = false;\n    },\n    //-----------------------------loading   end----------------------------\n    //-----------------------------GM   part start-------------------------\n\n    onClickBtnaddGem() {\n\n        let gem = Global.gem + 100;\n        this.GameMenuController.updateDate({'gem': gem});\n        Global.saveGem(gem);\n        this.GameMenuController.updateButtom();\n    },\n\n    onClickBtnsubGem() {\n\n        let gem = Global.gem - 10 > 0 ? Global.gem - 10 : 0;\n        this.GameMenuController.updateDate({'gem': gem});\n        Global.saveGem(gem);\n        this.GameMenuController.updateButtom();\n    },\n    onClickBtnaddGold() {\n\n        let gold = Global.gold + 100000;\n        this.GameMenuController.updateDate({'gold': gold});\n        Global.saveGold(gold);\n        this.GameMenuController.updateButtom();\n    },\n    onClickBtnsubGold() {\n\n        // let localStorage = require(\"LocalStorage\");\n        // localStorage.get('gold',0,function (data) {\n        //     console.log(\"fb data\",data);\n        // });\n        // return;\n\n        let gold = Global.gold - 10000 > 0 ? Global.gold - 10000 : 0;\n        this.GameMenuController.updateDate({'gold': gold});\n        Global.saveGold(gold);\n        this.GameMenuController.updateButtom();\n    },\n    onClickBtnaddExp() {\n\n\n        // let localStorage = require(\"LocalStorage\");\n        // localStorage.set('gold',1);\n        // return;\n\n        let exp = Global.exp +500000;\n        this.GameMenuController.updateDate({'exp': exp});\n        Global.saveExp(exp);\n        // this.GameMenuController.updateButtom();\n    }\n    ,\n    onClickUnlockAll(){\n        for (var id = this.hammerStart; id <=this.hammerEnd; id++) {\n            let info = ToolConfig[id];\n            if(Global.hammer[id] == undefined){\n                Global.hammer[id] = {id: id, attribute: info.attribute};\n                Global.saveHammer(Global.hammer);\n                this.addHammer(id);\n                this.setSmPosition(id);\n            }\n        }\n    }\n    //-----------------------------GM   part end-------------------------\n});\n//"]}