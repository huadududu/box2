{"version":3,"sources":["GameMenuController.js"],"names":["UIBottomFactory","require","AcceleratorConfig","ToolConfig","EfficiencyConfig","LevelConfig","LanguageConfig","GameUtils","Global","UILeadFactory","cc","Class","extends","Component","properties","bottomlist","Node","scrollView","ScrollView","level","Label","gold","golddesc","gem","toplist","TopProgressBar","ProgressBar","practice","broadcast","radioButton","default","type","Toggle","levelupBtn","Button","thisCheck","visible","radiotext","BoxController","onLoad","config","itemList","btnColor","itemlistNum","string","language","levelLeadNode","newBroadcast","broadcastShows","info","showThings","push","coin","exp","checkisrun","console","log","length","schedule","showMsgCallBack","PopMsgController","str","splice","showMsgAddReward","unschedule","initInfo","setGoldNum","setLevel","setGem","hard","setProgress","addUIBottom","startpos","i","j","undefined","node","create","eventcallback","bind","position","p","addChild","single","needlength","width","num","strnum1","formatNumMAX","stardandFun","active","value","pro","progress","addLevelLead","interactable","bool","y","isValid","destroy","changeHammerSpine","data","updateDate","name","updateButtom","scrollEvent","sender","event","thispos","getScrollOffset","movex","x","num1","num2","setCheckToggle","radioButtonClicked","toggle","index","indexOf","scrollToOffset","num0","color","onClickLevel","btnType","upgradView","id","getComponent","setBtnState","onCallBackFriends","prefab","loader","getRes","newNode","instantiate"],"mappings":"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","file":"GameMenuController.js","sourceRoot":"../../../../../assets/src/controller","sourcesContent":["/*\n * Created by Ren on 2018/6/6.\n */\nlet UIBottomFactory = require(\"UIBottomFactory\");\nlet AcceleratorConfig = require(\"AcceleratorConfig\");\nlet ToolConfig = require(\"ToolConfig\");\nlet EfficiencyConfig = require(\"EfficiencyConfig\");\nlet LevelConfig = require(\"LevelConfig\");\nlet LanguageConfig = require(\"LanguageConfig\");\nlet GameUtils = require(\"GameUtils\");\nlet Global = require('Global');\nlet UILeadFactory = require(\"UILeadFactory\");\n\ncc.Class({\n    extends:cc.Component,\n    properties:{\n        bottomlist:cc.Node,\n        scrollView: cc.ScrollView,\n        level: cc.Label,\n        gold:cc.Label,\n        golddesc:cc.Label,\n        gem:cc.Label,\n        toplist:cc.Node,\n        TopProgressBar:cc.ProgressBar,\n        practice:cc.Node,\n        broadcast:cc.Label,\n        radioButton:{\n            default:[],\n            type:cc.Toggle\n        },\n        levelupBtn:cc.Button,\n        thisCheck:{\n            visible:false,\n            default:0\n        },\n        radiotext:{\n            default:[],\n            type:cc.Label\n        },\n        BoxController: require(\"BoxController\")\n\n    },\n\n    onLoad:function(){\n\n        this.config=[AcceleratorConfig,ToolConfig,EfficiencyConfig];\n        this.itemList=[];\n        this.btnColor=['#ffa30f','#f9f9f9'];\n        this.itemlistNum=[];\n        this.radiotext[0].string = LanguageConfig['10035'][Global.language];\n        this.radiotext[1].string = LanguageConfig['10036'][Global.language];\n        this.radiotext[2].string = LanguageConfig['10037'][Global.language];\n        this.levelLeadNode=null;//level的引导节点\n        this.newBroadcast = 0;\n        // this.broadcast.onEnable(trackEntry =>{\n        //     // this.schedule(this.broadcastCallBack,0.5);\n        //     // this.newBroadcast=0;\n        //\n        // });\n    },\n    broadcastShows:function(info){\n\n        if(!this.showThings){\n            this.showThings=[];\n        }\n        if(info == 'finish'){\n            this.showThings = [];\n        }else{\n            this.showThings.push(\"coin+\"+info.coin);\n            this.showThings.push(\"exp+\"+info.exp);\n            if(!this.checkisrun){\n                this.checkisrun = true;\n                console.log(\" start this.showThings.length:\",this.showThings.length);\n                this.schedule(this.showMsgCallBack,0.2);\n            }\n        }\n    },\n    showMsgCallBack:function(){\n        if(this.showThings.length>0){\n            let PopMsgController = require(\"PopMsgController\");\n            let str = this.showThings.splice(0,1);\n            PopMsgController.showMsgAddReward(str);\n        }else{\n            console.log(\"cancle this.showThings.length:\",this.showThings.length);\n            this.unschedule(this.showMsgCallBack);\n            this.checkisrun = false;\n        }\n    },\n    initInfo:function() {\n        this.setGoldNum(Global.gold);\n        this.setLevel(Global.level);\n        this.setGem(Global.gem);\n        let hard = Global.hard;\n\n        let exp = LevelConfig[Global.level].exp;\n        this.setProgress(Global.exp/exp);\n\n    },\n    addUIBottom:function(){\n        this.config=[AcceleratorConfig,ToolConfig,EfficiencyConfig];\n        this.itemList=[];\n        let startpos = 0;\n        this.itemlistNum=[];\n        for(var i = 0;i < this.config.length;i++){\n            var j = 1;\n            for(; this.config[i][j] != undefined;j++){\n                let node = UIBottomFactory.create(i,this.config[i][j],this.eventcallback.bind(this));\n                node.position = cc.p(startpos+75,0);\n                this.bottomlist.addChild(node);\n                this.itemList.push(node);\n                startpos+=156;\n            }\n            this.itemlistNum[i]=j-1;\n\n        }\n        let single = this.itemlistNum[this.itemlistNum.length-1];\n        if(single<7){\n            startpos+=(7-single)*156;\n        }\n        let needlength = startpos+156;\n        this.bottomlist.width = needlength;\n        // this.bottomlist.x = needlength/2;\n\n\n    },\n\n    //设置金币\n    setGoldNum: function (num) {\n        let strnum1 = GameUtils.formatNumMAX(num);\n        this.gold.string = strnum1;\n        if(num >= 1000){\n        this.golddesc.string = '('+GameUtils.stardandFun(num)+')';\n            this.golddesc.node.active  =true;\n        }else{\n            this.golddesc.node.active  =false;\n        }\n    },\n    setLevel: function (level) {\n        this.level.string = \"LEVEL\"+level;\n    },\n    setGem: function (value){\n        this.gem.string = value;\n    },\n    setProgress: function (value){\n        let pro = this.TopProgressBar.progress;\n        this.addLevelLead(value>=1);\n        if (pro  == 1.0 && value ==1)\n            return;\n        this.levelupBtn.interactable = value>=1;\n\n        this.TopProgressBar.progress = value;\n    },\n\n    addLevelLead:function(bool){\n        if(Global.level ==1 && bool){\n            if(!this.levelLeadNode){\n                let node = UILeadFactory.create();\n                let position = this.levelupBtn.node.position;\n                position.y=position.y-15;\n                node.position= position;\n                // node.ratation = 270;\n                this.levelLeadNode = node;\n                this.toplist.addChild(node);\n            }\n        }else{\n            if(this.levelLeadNode && cc.isValid(this.levelLeadNode)){\n                this.levelLeadNode.destroy();\n                // this.levelLeadNode= null;\n            }\n        }\n    },\n    changeHammerSpine:function(data){\n        this.BoxController.changeHammerSpine(data);\n    },\n    updateDate:function (data){\n        if(data == null)\n            return;\n        for( var name in data) {\n            if (name == 'exp') {\n                let exp = LevelConfig[Global.level].exp;\n                let pro = data.exp / exp;\n                if (pro > 1)\n                    pro = 1;\n\n                this.setProgress(pro);\n            }\n            if (name == \"level\") {\n\n                this.setLevel(data.level);\n            }\n            if (name == \"gold\") {\n                this.setGoldNum(data.gold);\n            }\n            if(name == 'gem'){\n                this.setGem(data.gem);\n            }\n        }\n        if (name == \"level\" || name == \"gold\" || name == 'gem' ){\n            this.updateButtom();\n        }\n    },\n    scrollEvent: function(sender, event) {\n        let thispos= sender.getScrollOffset();\n        let movex = -thispos.x;\n        let num1= this.itemlistNum[0]*156 - 6;\n        let num2 = num1+this.itemlistNum[1]*156 - 6;\n        if(movex <num1){\n            this.setCheckToggle(0);\n        }else if(movex <num2){\n            this.setCheckToggle(1);\n\n        }else{\n            this.setCheckToggle(2);\n        }\n    },\n\n    radioButtonClicked: function(toggle) {\n        var index = this.radioButton.indexOf(toggle);\n        // var title = \"RadioButton\";\n        switch(index) {\n            case 0:\n                // title += \"1\";\n                this.scrollView.scrollToOffset(cc.p(0 , 0), 0.2);\n                break;\n            case 1:\n                let num0= this.itemlistNum[0]*156;\n                this.scrollView.scrollToOffset(cc.p( num0, 0), 0.2);\n                // title += \"2\";\n                break;\n            case 2:\n                let num1= (this.itemlistNum[0]+this.itemlistNum[1])*156;\n                this.scrollView.scrollToOffset(cc.p( num1, 0), 0.2);\n                // title += \"3\";\n                break;\n            default:\n                break;\n        }\n        // this.setCheckToggle(index);\n    },\n\n    setCheckToggle: function(num) {\n        if( this.thisCheck == num )\n            return;\n        this.thisCheck= num;\n        for( let i=0;i < this.radioButton.length;i++)\n        {\n            if(i == num){\n                // this.radioButton[i].isChecked = true;\n                this.radiotext[i].node.color = new cc.color(this.btnColor[0]);\n            }\n            else{\n                // this.radioButton[i].isChecked = false;\n                this.radiotext[i].node.color =new cc.color(this.btnColor[1]);\n            }\n        }\n    },\n\n    //点击升级按钮\n    onClickLevel:function(){\n        if(this.TopProgressBar.progress >=1){\n            Global.btnType = 'uplevel';\n            this.BoxController.upgradView.active = true;\n\n        }\n    },\n    eventcallback: function(type, id,string=null) {\n\n        this.BoxController.eventcallback(type,id,string);\n\n    },\n    updateButtom:function(){\n        for(let i=0;i<this.itemList.length;i++){\n            let node = this.itemList[i].getComponent(\"UIBottom\");\n            node.setBtnState();\n        }\n    },\n    onCallBackFriends:function () {\n\n        let prefab = cc.loader.getRes(\"prefab/inviteUI\");\n        let newNode= cc.instantiate(prefab);\n        this.node.addChild(newNode);\n    },\n\n\n\n});"]}