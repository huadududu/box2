{"version":3,"sources":["GameMenuController.js"],"names":["GameMenuView","require","UIBottomFactory","AcceleratorConfig","ToolConfig","EfficiencyConfig","LevelConfig","BoxController","cc","Class","extends","Component","properties","bottomlist","Node","scrollView","ScrollView","level","Label","gold","gem","TopProgressBar","ProgressBar","radioButton","default","type","Toggle","thisCheck","visible","onLoad","config","addUIBottom","undefined","itemList","startpos","width","i","length","j","node","create","position","p","addChild","push","initInfo","info","setGoldNum","setLevel","setGem","hard","exp","setProgress","getPositionInView","item","worldPos","parent","convertToWorldSpaceAR","viewPos","convertToNodeSpaceAR","num","string","value","progress","scrollEvent","sender","event","thispos","getScrollOffset","num1","num2","x","setCheckToggle","radioButtonClicked","toggle","index","indexOf","scrollToOffset","isChecked"],"mappings":"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","file":"GameMenuController.js","sourceRoot":"../../../../../assets/src/controller","sourcesContent":["/*\n * Created by Ren on 2018/6/6.\n */\n//let BoxController = require('BoxController');\nlet GameMenuView = require('GameMenuView');\nlet UIBottomFactory = require(\"UIBottomFactory\");\nlet AcceleratorConfig = require(\"AcceleratorConfig\");\nlet ToolConfig = require(\"ToolConfig\");\nlet EfficiencyConfig = require(\"EfficiencyConfig\");\nlet LevelConfig = require(\"LevelConfig\");\nlet BoxController = require(\"BoxController\");\n\ncc.Class({\n    extends:cc.Component,\n    properties:{\n        bottomlist:cc.Node,\n        scrollView: cc.ScrollView,\n        level: cc.Label,\n        gold:cc.Label,\n        gem:cc.Label,\n        TopProgressBar:cc.ProgressBar,\n        radioButton:{\n            default:[],\n            type:cc.Toggle\n        } ,\n        thisCheck:{\n            visible:false,\n            default:0\n        }\n\n    },\n    onLoad:function(){\n        this.config=[AcceleratorConfig,ToolConfig,EfficiencyConfig];\n    },\n    addUIBottom:function(){\n        if(this.config == undefined)\n        {\n            this.onLoad();\n        }\n        this.itemList=[];\n        let startpos = -this.bottomlist.width/2;\n        for(var i = 0;i < this.config.length;i++){\n            for(var j = 1; this.config[i][j] != undefined;j++){\n                let node = UIBottomFactory.create(i,this.config[i][j],\"English\");\n                node.position = cc.p(startpos+75,0);\n                this.bottomlist.addChild(node);\n                this.itemList.push(node);\n                startpos+=156;\n            }\n        }\n    },\n    initInfo:function(info) {\n        this.setGoldNum(info.gold);\n        this.setLevel(info.level);\n        this.setGem(info.gem);\n        let hard = info.hard;\n\n        let exp = LevelConfig[info.hard].exp;\n\n        this.setProgress(info.exp/exp);\n        // this.ToggleContainer(info.gold);\n\n    },\n    getPositionInView: function (item) { // get item position in scrollview's node space\n        let worldPos = item.parent.convertToWorldSpaceAR(item.position);\n        let viewPos = this.scrollView.node.convertToNodeSpaceAR(worldPos);\n        return viewPos;\n    },\n    //设置金币\n    setGoldNum: function (num) {\n        this.gold.string = num;\n    },\n    setLevel: function (level) {\n        this.level.string = level;\n    },\n    setGem: function (value){\n        this.gem.string = value;\n    },\n    setProgress: function (value){\n        this.TopProgressBar.progress = value;\n    },\n    scrollEvent: function(sender, event) {\n        let thispos= sender.getScrollOffset();\n        // switch(event) {\n        //     case 2: //left\n        //        // this.lblScrollEvent.string = \"Scroll to Left\"; \n\n        //        break;\n        //     case 3: ////right\n        //        // this.lblScrollEvent.string = \"Scroll to Right\"; \n        //        break;\n        //    }\n        let num1= 2*156;\n        let num2 = 3*156;\n        if(thispos.x <num1){\n            this.setCheckToggle(0);\n        }else if(thispos.x < num2){\n             this.setCheckToggle(1);\n\n        }else{\n            this.setCheckToggle(2);\n        }\n    },\n\n    radioButtonClicked: function(toggle) {\n        var index = this.radioButton.indexOf(toggle);\n        // var title = \"RadioButton\";\n        switch(index) {\n          case 0:\n              // title += \"1\";\n              this.scrollView.scrollToOffset(cc.p(0 , 0), 0.2);\n              break;\n          case 1:\n                let num1= 2*156;\n                this.scrollView.scrollToOffset(cc.p( num1, 0), 0.2);\n                // title += \"2\";\n                 break;\n          case 2:\n                let num2= 4*156;\n                this.scrollView.scrollToOffset(cc.p( num2, 0), 0.2);\n              // title += \"3\";\n                break;\n          default:\n              break;\n        }\n    },\n\n    setCheckToggle: function(num) {\n        if( this.thisCheck == num )\n            return;\n        for( let i=0;i < this.radioButton.length;i++)\n        {\n            if(i == num){\n                 this.radioButton[i].isChecked = true;\n            }\n            else{\n                 this.radioButton[i].isChecked = false;\n            }\n        }\n    }\n\n});"]}