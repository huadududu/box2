{"version":3,"sources":["SpriteFrameCenter.js"],"names":["SC","cc","Class","extends","Object","properties","ctor","spDic","atlas","getFrameByName","fileName","spFrame","realUrl","url","raw","texture","textureCache","addImage","SpriteFrame","preLoadAtlas","callBack","self","loader","loadRes","SpriteAtlas","err","console","log","getFrameFromAtlas","frameNameIn","frameName","split","frame","getSpriteFrame","bind","Center","module","exports"],"mappings":";;;;;;AAAA;;;;AAMA,IAAIA,KAAIC,GAAGC,KAAH,CAAS;AACbC,aAAQF,GAAGG,MADE;;AAGbC,gBAAW,EAHE;;AAObC,UAAK,gBAAY;;AAEb,aAAKC,KAAL,GAAa,EAAb;AACA,aAAKC,KAAL,GAAa,EAAb;AACH,KAXY;;AAab;AACAC,oBAAe,wBAAUC,QAAV,EAAoB;;AAE/B,YAAIC,UAAU,KAAKJ,KAAL,CAAWG,QAAX,CAAd;AACA,YAAG,CAACC,OAAJ,EAAY;AACR,gBAAIC,UAAUX,GAAGY,GAAH,CAAOC,GAAP,CAAWJ,QAAX,CAAd;AACA,gBAAIK,UAAUd,GAAGe,YAAH,CAAgBC,QAAhB,CAAyBL,OAAzB,CAAd;AACAD,sBAAU,IAAIV,GAAGiB,WAAP,CAAmBH,OAAnB,CAAV;AACA,iBAAKR,KAAL,CAAWG,QAAX,IAAuBC,OAAvB;AACH;AACD,eAAOA,OAAP;AACH,KAxBY;;AA4BbQ,kBAAa,sBAAUT,QAAV,EAAmBU,QAAnB,EAA6B;;AAEtC,YAAIC,OAAO,IAAX;AACApB,WAAGqB,MAAH,CAAUC,OAAV,CAAkBb,QAAlB,EAA4BT,GAAGuB,WAA/B,EAA4C,UAAUC,GAAV,EAAejB,KAAf,EAAsB;AAC9D,gBAAGiB,GAAH,EAAO;AACHC,wBAAQC,GAAR,CAAY,iCAAiCjB,QAA7C;AACH,aAFD,MAEK;AACDgB,wBAAQC,GAAR,CAAY,wBAAwBjB,QAApC;AACAW,qBAAKb,KAAL,CAAWE,QAAX,IAAuBF,KAAvB;AACA,oBAAGY,QAAH,EAAY;AACRA;AACH;AACJ;AACJ,SAVD;AAWH,KA1CY;;AA6Cb;AACAQ,uBAAkB,2BAAUlB,QAAV,EAAmBmB,WAAnB,EAAgC;AAC9C,YAAG,CAACA,WAAJ,EAAgB;AACZH,oBAAQC,GAAR,CAAY,0BAAZ,EAAuCE,WAAvC;AACA,mBAAO,IAAP;AACH;;AAED,YAAIC,YAAaD,YAAYE,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAjB;AACA,YAAIvB,QAAQ,KAAKA,KAAL,CAAWE,QAAX,CAAZ;AACA,YAAIsB,QAAQ,IAAZ;AACA,YAAGxB,KAAH,EAAS;AACLwB,oBAAQxB,MAAMyB,cAAN,CAAqBH,SAArB,CAAR;AACH,SAFD,MAEK;AACD,iBAAKX,YAAL,CAAkBT,QAAlB,EAA2B,KAAKkB,iBAAL,CAAuBM,IAAvB,CAA4B,IAA5B,EAAiCxB,QAAjC,EAA0CoB,SAA1C,CAA3B;AACH;AACD,eAAOE,KAAP;AACH;;AA7DY,CAAT,CAAR;;AAoEA,IAAIG,SAAS,IAAInC,EAAJ,EAAb;AACAoC,OAAOC,OAAP,GAAiBF,MAAjB","file":"SpriteFrameCenter.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\src\\controller","sourcesContent":["/**\r\n * Created by bing on 09/05/2018.\r\n */\r\n\r\n\r\n\r\nlet SC= cc.Class({\r\n    extends:cc.Object,\r\n\r\n    properties:{\r\n\r\n    },\r\n\r\n    ctor:function () {\r\n\r\n        this.spDic = {};\r\n        this.atlas = {};\r\n    },\r\n\r\n    //单一的图片加载  \"resources/png/\" + pngname\r\n    getFrameByName:function (fileName) {\r\n\r\n        let spFrame = this.spDic[fileName];\r\n        if(!spFrame){\r\n            var realUrl = cc.url.raw(fileName);\r\n            var texture = cc.textureCache.addImage(realUrl);\r\n            spFrame = new cc.SpriteFrame(texture);\r\n            this.spDic[fileName] = spFrame;\r\n        }\r\n        return spFrame;\r\n    },\r\n\r\n\r\n\r\n    preLoadAtlas:function (fileName,callBack) {\r\n\r\n        let self = this;\r\n        cc.loader.loadRes(fileName, cc.SpriteAtlas, function (err, atlas) {\r\n            if(err){\r\n                console.log(\"preLoadAtlas fail when load \" + fileName);\r\n            }else{\r\n                console.log(\"preLoadAtlas OK -> \" + fileName);\r\n                self.atlas[fileName] = atlas;\r\n                if(callBack){\r\n                    callBack();\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n\r\n    //传入的xxx.png需要转化成xxx\r\n    getFrameFromAtlas:function (fileName,frameNameIn) {\r\n        if(!frameNameIn){\r\n            console.log(\"your input file is wrong\",frameNameIn);\r\n            return null;\r\n        }\r\n        \r\n        let frameName =  frameNameIn.split(\".\")[0];\r\n        let atlas = this.atlas[fileName];\r\n        let frame = null;\r\n        if(atlas){\r\n            frame = atlas.getSpriteFrame(frameName);\r\n        }else{\r\n            this.preLoadAtlas(fileName,this.getFrameFromAtlas.bind(this,fileName,frameName));\r\n        }\r\n        return frame;\r\n    },\r\n\r\n\r\n\r\n});\r\n\r\n\r\nlet Center = new SC();\r\nmodule.exports = Center;"]}