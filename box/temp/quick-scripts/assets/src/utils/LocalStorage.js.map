{"version":3,"sources":["LocalStorage.js"],"names":["GameConfig","require","module","exports","LC","cc","Class","extends","Object","get","k","defaultv","callback","isFBInstantGame","FBInstant","player","getDataAsync","then","data","v","sys","localStorage","getItem","getMore","moreKeys","defaultData","console","log","set","setDataAsync","setItem","delete","removeItem","instance"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,aAAaC,QAAQ,YAAR,CAAjB;;AAGAC,OAAOC,OAAP,GAAmB,YAAY;;AAE3B,QAAIC,KAAKC,GAAGC,KAAH,CAAS;AACdC,iBAAQF,GAAGG,MADG;;AAGdC,aAAK,aAAUC,CAAV,EAAqC;AAAA,gBAAxBC,QAAwB,uEAAb,EAAa;AAAA,gBAAVC,QAAU;;;AAEtC,gBAAGZ,WAAWa,eAAX,EAAH,EAAgC;AAC5BC,0BAAUC,MAAV,CAAiBC,YAAjB,CAA8B,CAACN,CAAD,CAA9B,EACKO,IADL,CACU,UAASC,IAAT,EAAc;AAChB,wBAAI,OAAOA,KAAKR,CAAL,CAAP,KAAmB,WAAvB,EAAoC;AAChCE,iCAASM,KAAKR,CAAL,CAAT;AACH;AACJ,iBALL;AAMH,aAPD,MAOK;;AAED,oBAAIS,IAAId,GAAGe,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4BZ,CAA5B,CAAR;AACA,oBAAG,CAACS,CAAJ,EAAM;AACFA,wBAAIR,QAAJ;AACH;AACD;AACAC,yBAASO,CAAT;AACH;AACJ,SArBa;AAsBdI,iBAAS,iBAAUC,QAAV,EAA4C;AAAA,gBAAxBb,QAAwB,uEAAb,EAAa;AAAA,gBAAVC,QAAU;;AACjD,gBAAGZ,WAAWa,eAAX,EAAH,EAAgC;AAC5B,oBAAIY,cAAgBd,QAApB;AACAe,wBAAQC,GAAR,CAAY,MAAZ,EAAmB,CAACjB,CAAD,CAAnB;AACAI,0BAAUC,MAAV,CAAiBC,YAAjB,CAA8BQ,QAA9B,EACKP,IADL,CACU,UAASC,IAAT,EAAc;AAChBQ,4BAAQC,GAAR,CAAY,aAAZ,EAA0BT,IAA1B;AACA,wBAAGN,QAAH,EAAY;AACR,4BAAI,OAAOM,IAAP,IAAc,WAAlB,EAA+B;AAC3BN,qCAASM,KAAKR,CAAL,CAAT;AACH,yBAFD,MAEK;AACDE,qCAASa,WAAT;AACH;AACJ;AAEJ,iBAXL;AAYH;AACJ,SAvCa;AAwCdG,aAAK,aAAUlB,CAAV,EAAYS,CAAZ,EAAe;;AAEhB,gBAAGnB,WAAWa,eAAX,EAAH,EAAgC;AAC5BC,0BAAUC,MAAV,CAAiBc,YAAjB,CAA8B;AAC1BnB,uBAAES;AADwB,iBAA9B;AAGH,aAJD,MAIK;AACDd,mBAAGe,GAAH,CAAOC,YAAP,CAAoBS,OAApB,CAA4BpB,CAA5B,EAA8BS,CAA9B;AACH;AACJ,SAjDa;;AAmDdY,gBAAO,iBAAUrB,CAAV,EAAa;AACjBL,eAAGe,GAAH,CAAOC,YAAP,CAAoBW,UAApB,CAA+BtB,CAA/B;AACF;;AArDa,KAAT,CAAT;;AA2DA,QAAIuB,WAAW,IAAI7B,EAAJ,EAAf;AACA,WAAO6B,QAAP;AACH,CA/DkB,EAAnB","file":"LocalStorage.js","sourceRoot":"../../../../../assets/src/utils","sourcesContent":["/**\n * Created by bing on 02/05/2018.\n */\n\nlet GameConfig = require(\"GameConfig\");\n\n\nmodule.exports  =  function () {\n\n    let LC = cc.Class({\n        extends:cc.Object,\n\n        get: function (k, defaultv = '',callback) {\n\n            if(GameConfig.isFBInstantGame()){\n                FBInstant.player.getDataAsync([k])\n                    .then(function(data){\n                        if (typeof data[k] !== 'undefined') {\n                            callback(data[k]);\n                        }\n                    });\n            }else{\n\n                let v = cc.sys.localStorage.getItem(k);\n                if(!v){\n                    v = defaultv;\n                }\n                // return v;\n                callback(v);\n            }\n        },\n        getMore: function (moreKeys, defaultv = '',callback) {\n            if(GameConfig.isFBInstantGame()){\n                let defaultData  =  defaultv;\n                console.log(\"get \",[k]);\n                FBInstant.player.getDataAsync(moreKeys)\n                    .then(function(data){\n                        console.log('data is get',data);\n                        if(callback){\n                            if (typeof data!= 'undefined') {\n                                callback(data[k]);\n                            }else{\n                                callback(defaultData);\n                            }\n                        }\n\n                    });\n            }\n        },\n        set: function (k,v) {\n\n            if(GameConfig.isFBInstantGame()){\n                FBInstant.player.setDataAsync({\n                    k:v\n                });\n            }else{\n                cc.sys.localStorage.setItem(k,v);\n            }\n        },\n       \n        delete:function (k) {\n           cc.sys.localStorage.removeItem(k);\n        }\n        \n        \n    });\n\n\n    let instance = new LC();\n    return instance;\n}();\n\n\n\n"]}