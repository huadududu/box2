{"version":3,"sources":["UpgradView.js"],"names":["Global","require","StageConfig","BoxConfig","RewardConfig","GameUtils","LevelConfig","EfficiencyConfig","LanguageConfig","cc","Class","extends","Component","properties","RewardLable","Label","TitleLable","DescLable","vediodesc","nextdesc","BoxController","language","onLoad","type","msg","onEnable","btnType","addlevel","jumpTimeReward","outlineReward","myinfo","level","needexp","exp","needgold","rewardcoin","addgold","saveLevel","saveExp","claim","string","GameMenuController","updateDate","desc","time","skipID","jumptime","formatHour","onVedioSureBtn","golds","gold","saveGold","node","active","onNextBtn"],"mappings":"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","file":"UpgradView.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\src\\view","sourcesContent":["/*\r\n * Created by Ren on 2018/6/12.\r\n */\r\nlet Global = require('Global');\r\nlet StageConfig = require(\"StageConfig\");\r\nlet BoxConfig = require(\"BoxConfig\");\r\nlet RewardConfig = require(\"RewardConfig\");\r\nlet GameUtils = require(\"GameUtils\");\r\nlet LevelConfig =require(\"LevelConfig\");\r\nlet EfficiencyConfig =require(\"EfficiencyConfig\");\r\nlet LanguageConfig = require(\"LanguageConfig\");\r\ncc.Class({\r\n\r\n    extends:cc.Component,\r\n    properties:{\r\n\r\n        RewardLable:cc.Label,\r\n        TitleLable:cc.Label,\r\n        DescLable:cc.Label,\r\n        vediodesc:cc.Label,\r\n        nextdesc:cc.Label,\r\n        BoxController:require('BoxController'),\r\n        language:'English'\r\n    },\r\n\r\n    onLoad:function () {\r\n        this.type;\r\n        this.msg={'uplevel':3,'skip':2,'outline':2};\r\n    },\r\n    onEnable:function(){\r\n        this.type= this.msg[Global.btnType];\r\n        if(Global.btnType == 'uplevel')\r\n        {\r\n            this.addlevel();\r\n\r\n        }\r\n        else if(Global.btnType == 'skip'){\r\n            this.jumpTimeReward();\r\n\r\n        }else{\r\n            this.outlineReward();\r\n        }\r\n\r\n\r\n    },\r\n    addlevel:function(){\r\n        let myinfo ={};\r\n        let level =Global.level;\r\n        let needexp = LevelConfig[ level].exp;\r\n        let needgold = LevelConfig[ level].rewardcoin;\r\n        Global.addgold = needgold;\r\n        myinfo.exp =Global.exp-needexp;\r\n        myinfo.level =Global.level+1;\r\n        Global.saveLevel( myinfo.level);\r\n        Global.saveExp( myinfo.exp);\r\n        let claim = LanguageConfig['10028'][Global.language];\r\n        this.TitleLable.string = LanguageConfig['10026'][Global.language];\r\n        this.DescLable.string = LanguageConfig['10027'][Global.language];\r\n        this.RewardLable.string = \"x\"+needgold;\r\n        this.nextdesc.string = claim;\r\n        this.vediodesc.string = claim+'x'+this.type;\r\n        Global.addgold =needgold;\r\n        this.BoxController.GameMenuController.updateDate(myinfo);\r\n    },\r\n    //离线奖励\r\n    outlineReward:function(){\r\n\r\n        let claim = LanguageConfig['10028'][Global.language];\r\n        this.TitleLable.string = LanguageConfig['10033'][Global.language];\r\n        this.DescLable.string = LanguageConfig['10032'][Global.language];\r\n        this.RewardLable.string = \"x\"+Global.addgold;\r\n        this.nextdesc.string = claim;\r\n        this.vediodesc.string = claim+'x'+this.type;\r\n\r\n    },\r\n    //跳过时间\r\n    jumpTimeReward:function(){\r\n        let claim = LanguageConfig['10028'][Global.language];\r\n        let desc= LanguageConfig['10031'][Global.language];\r\n        let time = EfficiencyConfig[Global.skipID].jumptime;\r\n        desc= GameUtils.formatHour(desc,time);\r\n        this.TitleLable.string = LanguageConfig['10017'][Global.language];\r\n        this.DescLable.string =desc;\r\n        this.RewardLable.string = \"x\"+Global.addgold;\r\n        this.nextdesc.string = claim;\r\n        this.vediodesc.string = claim+'x'+this.type;\r\n    },\r\n    onVedioSureBtn:function(){\r\n        let golds = Global.gold+Global.addgold *  this.type;\r\n        if(Global.addgold>0 ){\r\n            this.BoxController.GameMenuController.updateDate({gold:golds});\r\n            Global.saveGold(golds);\r\n        }\r\n        Global.addgold =0;\r\n        this.node.active = false;\r\n\r\n    },\r\n    onNextBtn:function(){\r\n        let golds = Global.gold+Global.addgold;\r\n        this.BoxController.GameMenuController.updateDate({gold:golds});\r\n        Global.saveGold(golds);\r\n        if(Global.addgold>0 ){\r\n            this.node.active = false;\r\n            Global.saveGold(golds);\r\n        }\r\n        Global.addgold =0;\r\n        this.node.active = false;\r\n    },\r\n\r\n});"]}