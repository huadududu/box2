{"version":3,"sources":["UpgradView.js"],"names":["Global","require","StageConfig","BoxConfig","RewardConfig","GameUtils","LevelConfig","cc","Class","extends","Component","properties","RewardLable","Label","TitleLable","DescLable","BoxController","onLoad","onEnable","addlevel","myinfo","level","needexp","exp","needgold","rewardcoin","addgold","saveLevel","saveExp","string","GameMenuController","updateDate","onVedioSureBtn","golds","gold","saveGold","node","active","onNextBtn"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,cAAcD,QAAQ,aAAR,CAAlB;AACA,IAAIE,YAAYF,QAAQ,WAAR,CAAhB;AACA,IAAIG,eAAeH,QAAQ,cAAR,CAAnB;AACA,IAAII,YAAYJ,QAAQ,WAAR,CAAhB;AACA,IAAIK,cAAaL,QAAQ,aAAR,CAAjB;AACAM,GAAGC,KAAH,CAAS;;AAELC,aAAQF,GAAGG,SAFN;AAGLC,gBAAW;;AAEPC,qBAAYL,GAAGM,KAFR;AAGPC,oBAAWP,GAAGM,KAHP;AAIPE,mBAAUR,GAAGM,KAJN;AAKPG,uBAAcf,QAAQ,eAAR;AALP,KAHN;;AAWLgB,YAAO,kBAAY,CAClB,CAZI;AAaLC,cAAS,oBAAU;AACf,aAAKC,QAAL;AAEH,KAhBI;AAiBLA,cAAS,oBAAU;AACf,YAAIC,SAAQ,EAAZ;AACA,YAAIC,QAAOrB,OAAOqB,KAAlB;;AAEA,YAAIC,UAAUhB,YAAae,KAAb,EAAoBE,GAAlC;AACA,YAAIC,WAAWlB,YAAae,KAAb,EAAoBI,UAAnC;AACAzB,eAAO0B,OAAP,GAAiBF,QAAjB;AACAJ,eAAOG,GAAP,GAAYvB,OAAOuB,GAAP,GAAWD,OAAvB;AACAF,eAAOC,KAAP,GAAcrB,OAAOqB,KAAP,GAAa,CAA3B;AACArB,eAAO2B,SAAP,CAAkBP,OAAOC,KAAzB;AACArB,eAAO4B,OAAP,CAAgBR,OAAOG,GAAvB;;AAEA,aAAKX,WAAL,CAAiBiB,MAAjB,GAA0B,MAAIL,QAA9B;AACAxB,eAAO0B,OAAP,GAAgBF,QAAhB;AACA,aAAKR,aAAL,CAAmBc,kBAAnB,CAAsCC,UAAtC,CAAiDX,MAAjD;AAEH,KAjCI;AAkCLY,oBAAe,0BAAU;AACrB,YAAIC,QAAQjC,OAAOkC,IAAP,GAAYlC,OAAO0B,OAAP,GAAiB,CAAzC;;AAEA,YAAG1B,OAAO0B,OAAP,GAAe,CAAlB,EAAqB;AACjB,iBAAKV,aAAL,CAAmBc,kBAAnB,CAAsCC,UAAtC,CAAiD,EAACG,MAAKD,KAAN,EAAjD;AACAjC,mBAAOmC,QAAP,CAAgBF,KAAhB;AACH;AACDjC,eAAO0B,OAAP,GAAgB,CAAhB;AACA,aAAKU,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AAEH,KA5CI;AA6CLC,eAAU,qBAAU;AAChB,YAAIL,QAAQjC,OAAOkC,IAAP,GAAYlC,OAAO0B,OAA/B;AACA,aAAKV,aAAL,CAAmBc,kBAAnB,CAAsCC,UAAtC,CAAiD,EAACG,MAAKD,KAAN,EAAjD;AACAjC,eAAOmC,QAAP,CAAgBF,KAAhB;AACA,YAAGjC,OAAO0B,OAAP,GAAe,CAAlB,EAAqB;AACjB,iBAAKU,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACArC,mBAAOmC,QAAP,CAAgBF,KAAhB;AACH;AACDjC,eAAO0B,OAAP,GAAgB,CAAhB;AACA,aAAKU,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH;;AAvDI,CAAT","file":"UpgradView.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\src\\view","sourcesContent":["/*\r\n * Created by Ren on 2018/6/12.\r\n */\r\nlet Global = require('Global');\r\nlet StageConfig = require(\"StageConfig\");\r\nlet BoxConfig = require(\"BoxConfig\");\r\nlet RewardConfig = require(\"RewardConfig\");\r\nlet GameUtils = require(\"GameUtils\");\r\nlet LevelConfig =require(\"LevelConfig\");\r\ncc.Class({\r\n\r\n    extends:cc.Component,\r\n    properties:{\r\n\r\n        RewardLable:cc.Label,\r\n        TitleLable:cc.Label,\r\n        DescLable:cc.Label,\r\n        BoxController:require('BoxController')\r\n    },\r\n\r\n    onLoad:function () {\r\n    },\r\n    onEnable:function(){\r\n        this.addlevel();\r\n\r\n    },\r\n    addlevel:function(){\r\n        let myinfo ={};\r\n        let level =Global.level;\r\n\r\n        let needexp = LevelConfig[ level].exp;\r\n        let needgold = LevelConfig[ level].rewardcoin;\r\n        Global.addgold = needgold;\r\n        myinfo.exp =Global.exp-needexp;\r\n        myinfo.level =Global.level+1;\r\n        Global.saveLevel( myinfo.level);\r\n        Global.saveExp( myinfo.exp);\r\n\r\n        this.RewardLable.string = \"x\"+needgold;\r\n        Global.addgold =needgold;\r\n        this.BoxController.GameMenuController.updateDate(myinfo);\r\n\r\n    },\r\n    onVedioSureBtn:function(){\r\n        let golds = Global.gold+Global.addgold * 3;\r\n\r\n        if(Global.addgold>0 ){\r\n            this.BoxController.GameMenuController.updateDate({gold:golds});\r\n            Global.saveGold(golds);\r\n        }\r\n        Global.addgold =0;\r\n        this.node.active = false;\r\n\r\n    },\r\n    onNextBtn:function(){\r\n        let golds = Global.gold+Global.addgold;\r\n        this.BoxController.GameMenuController.updateDate({gold:golds});\r\n        Global.saveGold(golds);\r\n        if(Global.addgold>0 ){\r\n            this.node.active = false;\r\n            Global.saveGold(golds);\r\n        }\r\n        Global.addgold =0;\r\n        this.node.active = false;\r\n    }\r\n\r\n});"]}